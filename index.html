<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lev's Birthday Weekend ‚Äì Portland 2025</title>
  <style>
    /* SIMPLE, LIGHTWEIGHT STYLES - PHASE 1 */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f5;
      color: #333;
      line-height: 1.6;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    h1 {
      color: #2c5282;
      margin-bottom: 10px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 20px;
    }

    /* Header Info */
    .header-info {
      display: grid;
      gap: 15px;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid #e2e8f0;
    }

    .info-box {
      background: #f7fafc;
      padding: 15px;
      border-radius: 4px;
      border-left: 4px solid #4299e1;
    }

    .info-label {
      font-weight: 600;
      color: #2d3748;
      margin-bottom: 5px;
      font-size: 12px;
      text-transform: uppercase;
    }

    .info-value {
      color: #4a5568;
      font-size: 14px;
    }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      border-bottom: 2px solid #e2e8f0;
      flex-wrap: wrap;
    }

    .tab-button {
      padding: 12px 24px;
      background: none;
      border: none;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      color: #718096;
      transition: all 0.2s;
    }

    .tab-button:hover {
      color: #2d3748;
      background: #f7fafc;
    }

    .tab-button.active {
      color: #2c5282;
      border-bottom-color: #4299e1;
    }

    /* Tab Content */
    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Sections */
    .section {
      margin-bottom: 40px;
    }

    .section-title {
      font-size: 20px;
      font-weight: 600;
      color: #2d3748;
      margin-bottom: 10px;
    }

    .section-description {
      color: #718096;
      margin-bottom: 20px;
      font-size: 14px;
    }

    /* Cards */
    .card-grid {
      display: grid;
      gap: 20px;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }

    .card {
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.2s;
      background: white;
    }

    .card:hover {
      border-color: #cbd5e0;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .card.selected {
      border-color: #4299e1;
      background: #ebf8ff;
    }

    .card-title {
      font-size: 18px;
      font-weight: 600;
      color: #2d3748;
      margin-bottom: 8px;
    }

    .card-tag {
      display: inline-block;
      background: #edf2f7;
      color: #4a5568;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      margin-bottom: 10px;
      font-weight: 500;
    }

    .card.selected .card-tag {
      background: #bee3f8;
      color: #2c5282;
    }

    .card-description {
      color: #4a5568;
      font-size: 14px;
      margin-bottom: 10px;
      line-height: 1.5;
    }

    .card-details {
      color: #718096;
      font-size: 13px;
      margin-bottom: 12px;
      line-height: 1.4;
    }

    .card-links {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
    }

    .card-link {
      display: inline-block;
      padding: 6px 12px;
      background: #edf2f7;
      color: #4a5568;
      text-decoration: none;
      border-radius: 4px;
      font-size: 12px;
      transition: all 0.2s;
    }

    .card-link:hover {
      background: #e2e8f0;
      color: #2d3748;
    }

    /* Quick Link Buttons */
    .card-quick-links {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
    }

    .quick-link-btn {
      display: inline-block;
      padding: 8px 14px;
      background: #4299e1;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 500;
      transition: all 0.2s;
      border: 2px solid transparent;
    }

    .quick-link-btn:hover {
      background: #3182ce;
      transform: translateY(-1px);
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .card.selected .quick-link-btn {
      background: #2c5282;
      border-color: #2b6cb0;
    }

    /* Expandable sections */
    .expand-button {
      width: 100%;
      padding: 12px;
      background: #edf2f7;
      border: 2px solid #cbd5e0;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      color: #718096;
      margin-top: 20px;
      transition: all 0.2s;
    }

    .expand-button:hover {
      background: #e2e8f0;
    }

    .expand-button.enabled {
      background: #bee3f8;
      border-color: #4299e1;
      color: #2c5282;
      cursor: pointer;
    }

    .expandable-content {
      display: none;
      margin-top: 20px;
      padding: 20px;
      background: #f7fafc;
      border-radius: 6px;
    }

    .expandable-content.show {
      display: block;
    }

    /* Mini cards for stores */
    .mini-card {
      border: 1px solid #e2e8f0;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .mini-card:hover {
      border-color: #cbd5e0;
      background: #f7fafc;
    }

    .mini-card.selected {
      border-color: #4299e1;
      background: #ebf8ff;
    }

    .mini-card-title {
      font-weight: 600;
      color: #2d3748;
      margin-bottom: 5px;
    }

    .mini-card-description {
      font-size: 13px;
      color: #4a5568;
      margin-bottom: 8px;
    }

    /* Summary Panel */
    .summary-panel {
      position: sticky;
      top: 20px;
      background: #f7fafc;
      padding: 20px;
      border-radius: 8px;
      border: 2px solid #bee3f8;
      margin-bottom: 30px;
      max-height: 240px;
      overflow-y: auto;
    }

    .summary-panel::-webkit-scrollbar {
      width: 8px;
    }

    .summary-panel::-webkit-scrollbar-track {
      background: #e2e8f0;
      border-radius: 4px;
    }

    .summary-panel::-webkit-scrollbar-thumb {
      background: #4299e1;
      border-radius: 4px;
    }

    .summary-title {
      font-size: 18px;
      font-weight: 600;
      color: #2c5282;
      margin-bottom: 15px;
    }

    .summary-section {
      margin-bottom: 15px;
    }

    .summary-section-title {
      font-weight: 600;
      color: #2d3748;
      margin-bottom: 5px;
    }

    .summary-day {
      font-size: 14px;
      font-weight: 700;
      color: #2c5282;
      margin-top: 15px;
      margin-bottom: 8px;
      padding-bottom: 4px;
      border-bottom: 2px solid #bee3f8;
      letter-spacing: 0.5px;
    }

    .summary-day:first-of-type {
      margin-top: 0;
    }

    .summary-item {
      color: #4a5568;
      font-size: 14px;
      margin-bottom: 5px;
      font-family: 'Courier New', Courier, monospace;
      white-space: pre;
    }

    .summary-empty {
      color: #718096;
      font-style: italic;
    }

    /* Footer */
    .footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 2px solid #e2e8f0;
      text-align: center;
      color: #718096;
    }

    .reset-button {
      margin: 20px 0;
      padding: 10px 20px;
      background: white;
      border: 2px solid #e2e8f0;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }

    .reset-button:hover {
      border-color: #fc8181;
      color: #c53030;
    }

    /* Hidden utility */
    .hidden {
      display: none !important;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .card-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Lev's Birthday Weekend</h1>
    <div class="subtitle">Portland, Maine ‚Ä¢ December 20-21, 2025</div>

    <!-- Header Info -->
    <div class="header-info">
      <div class="info-box">
        <div class="info-label">Accommodations</div>
        <div class="info-value">AC Hotel Portland Downtown/Waterfront</div>
      </div>
      <div class="info-box">
        <div class="info-label">Goal</div>
        <div class="info-value">Kicking off your 35th rotation around the sun!</div>
      </div>
    </div>

    <!-- Summary Panel -->
    <div class="summary-panel">
      <div class="summary-title">üî• Your Weekend Summary</div>
      <div id="summary-content" class="summary-empty">
        Make selections below to build your weekend!
      </div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tab-button active" data-tab="heading-out">Heading Out</button>
      <button class="tab-button" data-tab="saturday-night">Saturday Night</button>
      <button class="tab-button" data-tab="sunday">Sunday</button>
      <button class="tab-button" data-tab="heading-home">Heading Home</button>
    </div>

    <!-- Tab Content Container -->
    <div id="tab-container"></div>

    <!-- Footer -->
    <div class="footer">
      <p>Your selections save automatically</p>
      <button class="reset-button" id="reset-btn">Reset All Selections</button>
      <p style="margin-top: 20px; font-size: 16px; color: #2d3748;">Note: You are loved!</p>
    </div>
  </div>

  <script>
    // ============================================
    // CONTENT DATA - EDIT THIS SECTION TO UPDATE ACTIVITIES
    // ============================================
    const CONTENT = {
      // ============================================
      // TAB 1: HEADING OUT
      // ============================================
      headingOut: {
        sections: [
          {
            id: 'departure-time',
            title: 'Choose Your Departure Time',
            description: 'Pick when you want to hit the road',
            selectionType: 'single',
            cards: [
              {
                id: 'depart-10am',
                title: 'Leave at 10:00 AM',
                time: '10:00a',
                tag: 'Early Start',
                description: 'Arrive by 12pm, more time in Portland'
              },
              {
                id: 'depart-11am',
                title: 'Leave at 11:00 AM',
                time: '11:00a',
                tag: 'Balanced',
                description: 'Arrive by 1pm, good balance'
              },
              {
                id: 'depart-12pm',
                title: 'Leave at 12:00 PM',
                time: '12:00p',
                tag: 'Leisurely',
                description: 'Arrive by 2pm, relaxed morning'
              }
            ]
          },
          {
            id: 'before-checkin',
            title: 'Before Check-In Activities',
            description: 'Pick one activity before 3pm check-in',
            selectionType: 'single',
            cards: [
              {
                id: 'arabica',
                title: 'Arabica Coffee House',
                time: '12:00p',
                tag: 'Coffee',
                description: 'Local coffee shop with cozy vibes',
                details: '450 Forest Ave ‚Ä¢ Open 7am-5pm',
                address: '450 Forest Ave, Portland, ME',
                links: [
                  { text: 'Website', url: 'https://www.arabicacoffeehouse.com' },
                  { text: 'Menu', url: 'https://www.arabicacoffeehouse.com/menu' }
                ]
              },
              {
                id: 'headlight',
                title: 'Headlight Brewing',
                time: '12:00p',
                tag: 'Brewery',
                description: 'Craft brewery with great atmosphere',
                details: '590 Forest Ave ‚Ä¢ Open 12pm-10pm',
                address: '590 Forest Ave, Portland, ME',
                links: [
                  { text: 'Website', url: 'https://headlightbrewing.com' }
                ]
              },
              {
                id: 'east-end',
                title: 'Explore East End',
                time: '12:00p',
                tag: 'Walking',
                description: 'Walk around the artsy East End neighborhood',
                details: 'Galleries, shops, and street art',
                address: 'East End, Portland, ME'
              },
              {
                id: 'waterfront-walk',
                title: 'Old Port Waterfront',
                time: '12:00p',
                tag: 'Walking',
                description: 'Stroll along the historic waterfront',
                details: 'Scenic views, cobblestone streets',
                address: 'Old Port, Portland, ME'
              }
            ]
          }
        ]
      },

      // ============================================
      // TAB 2: SATURDAY NIGHT
      // ============================================
      saturdayNight: {
        sections: [
          {
            id: 'checkin',
            title: 'Check-In',
            description: 'Arrive at the hotel',
            selectionType: 'single',
            cards: [
              {
                id: 'hotel-checkin',
                title: 'AC Hotel Check-In',
                time: '3:00p',
                tag: 'Hotel',
                description: 'Drop bags, settle in',
                details: '433 Commercial St',
                address: '433 Commercial St, Portland, ME',
                links: [
                  { text: 'Website', url: 'https://www.marriott.com/hotels/travel/pwmak-ac-hotel-portland-downtown-waterfront/' }
                ]
              }
            ]
          },
          {
            id: 'freshen-up',
            title: 'Freshen Up',
            description: 'Get ready for the evening',
            selectionType: 'single',
            cards: [
              {
                id: 'get-ready',
                title: 'Get Ready',
                time: '4:00p',
                tag: 'Prep',
                description: 'Change, relax, prepare for dinner and show'
              }
            ]
          },
          {
            id: 'fantasy-reminder',
            title: 'Fantasy Football',
            description: 'Don\'t forget to set your lineup!',
            selectionType: 'single',
            cards: [
              {
                id: 'ff-lineup',
                title: 'Set Fantasy Lineup',
                time: '5:00p',
                tag: 'Important',
                description: 'Week 16 games start Saturday - set your lineup before dinner!',
                details: 'Games at 1pm, 4:25pm, and 8:15pm ET'
              }
            ]
          },
          {
            id: 'dinner',
            title: 'Dinner',
            description: 'Pre-show dinner',
            selectionType: 'single',
            cards: [
              {
                id: 'eventide',
                title: 'Eventide Oyster Co.',
                time: '6:00p',
                tag: 'Seafood',
                description: 'Award-winning oysters and creative seafood',
                details: '86 Middle St ‚Ä¢ 4-9:30pm ‚Ä¢ Walk: 5 min',
                address: '86 Middle St, Portland, ME',
                links: [
                  { text: 'Website', url: 'https://www.eventideoysterco.com' },
                  { text: 'Menu', url: 'https://www.eventideoysterco.com/portland-menu' }
                ]
              },
              {
                id: 'duckfat',
                title: 'Duckfat',
                time: '6:00p',
                tag: 'Comfort Food',
                description: 'Sandwiches, poutine, Belgian fries',
                details: '43 Middle St ‚Ä¢ 11am-9pm ‚Ä¢ Walk: 5 min',
                address: '43 Middle St, Portland, ME',
                links: [
                  { text: 'Website', url: 'https://duckfat.com' }
                ]
              },
              {
                id: 'central-provisions',
                title: 'Central Provisions',
                time: '6:00p',
                tag: 'Small Plates',
                description: 'Inventive small plates, excellent cocktails',
                details: '414 Fore St ‚Ä¢ 4-10pm ‚Ä¢ Walk: 3 min',
                address: '414 Fore St, Portland, ME',
                links: [
                  { text: 'Website', url: 'https://www.central-provisions.com' }
                ]
              }
            ]
          },
          {
            id: 'show',
            title: 'Evening Show',
            description: 'Choose your evening entertainment',
            selectionType: 'single',
            cards: [
              {
                id: 'magic-show',
                title: 'Comedy/Magic Show at Jonathan\'s',
                time: '8:00p',
                tag: 'Comedy & Magic',
                description: 'Intimate venue with comedy and magic performances',
                details: '92 Bourne St, Ogunquit (40 min drive) ‚Ä¢ Show: 8pm',
                address: '92 Bourne St, Ogunquit, ME',
                links: [
                  { text: 'Website', url: 'https://jonathansogunquit.com' },
                  { text: 'Tickets', url: 'https://jonathansogunquit.com/calendar' }
                ]
              },
              {
                id: 'live-music',
                title: 'Live Music in Portland',
                time: '8:00p',
                tag: 'Music',
                description: 'Check local venues for live performances',
                details: 'Port City Music Hall, One Longfellow Square, or State Theatre',
                address: 'Portland, ME',
                links: [
                  { text: 'Port City', url: 'https://www.portcitymusichall.com' },
                  { text: 'State Theatre', url: 'https://statetheatreportland.com' }
                ]
              }
            ]
          },
          {
            id: 'late-night',
            title: 'Late Night Options',
            description: 'After the show... (Select any)',
            selectionType: 'single',
            expandable: true,
            expandCondition: 'show-selected',
            cards: [
              {
                id: 'novare-res',
                title: 'Novare Res Bier Cafe',
                tag: 'Beer Bar',
                description: '500+ beers, European-style beer cafe',
                details: '4 Canal Plaza ‚Ä¢ Open until 1am',
                links: [
                  { text: 'Website', url: 'https://novareresbiercafe.com' }
                ]
              },
              {
                id: 'portland-hunt',
                title: 'Portland Hunt + Alpine Club',
                tag: 'Cocktails',
                description: 'Craft cocktails, cozy alpine-themed bar',
                details: '75 Market St ‚Ä¢ Open until 1am',
                links: [
                  { text: 'Website', url: 'https://huntalpine.com' }
                ]
              },
              {
                id: 'brass-fox',
                title: 'The Brass Fox',
                tag: 'Speakeasy',
                description: 'Hidden speakeasy-style cocktail bar',
                details: '92 Exchange St ‚Ä¢ Open until 1am'
              },
              {
                id: 'arcade',
                title: 'Arcadia National Bar',
                tag: 'Arcade Bar',
                description: 'Retro arcade games and drinks',
                details: '21 Hanover St ‚Ä¢ Open until 1am',
                links: [
                  { text: 'Website', url: 'https://arcadianationalbar.com' }
                ]
              },
              {
                id: 'hotel-bar',
                title: 'Back to Hotel Bar',
                tag: 'Nightcap',
                description: 'Wind down at the AC Hotel bar',
                details: 'Convenient, no travel needed'
              }
            ]
          }
        ]
      },

      // ============================================
      // TAB 3: SUNDAY
      // ============================================
      sunday: {
        sections: [
          {
            id: 'early-morning',
            title: 'Early Morning',
            description: 'Start the day relaxed',
            selectionType: 'single',
            cards: [
              {
                id: 'baths',
                title: 'Hot Baths',
                tag: 'Relaxation',
                description: 'Hydrotherapy baths at East End neighborhood spot',
                details: 'Portland Salt Co. - 547 Washington Ave ‚Ä¢ Book ahead',
                links: [
                  { text: 'Website', url: 'https://www.portlandsaltco.com' },
                  { text: 'Book', url: 'https://www.portlandsaltco.com/book-now' }
                ]
              }
            ]
          },
          {
            id: 'brunch',
            title: 'Sunday Brunch',
            description: 'Pick your brunch spot',
            selectionType: 'single',
            cards: [
              {
                id: 'duckfat-brunch',
                title: 'Duckfat',
                tag: 'Comfort',
                description: 'Breakfast sandwiches and famous fries',
                details: '43 Middle St ‚Ä¢ 11am-9pm',
                links: [
                  { text: 'Website', url: 'https://duckfat.com' }
                ]
              },
              {
                id: 'becky-diner',
                title: 'Becky\'s Diner',
                tag: 'Classic',
                description: 'Portland institution, hearty breakfast',
                details: '390 Commercial St ‚Ä¢ 5am-9pm',
                links: [
                  { text: 'Website', url: 'https://beckysdiner.com' }
                ]
              },
              {
                id: 'brunch-hotel',
                title: 'Hotel Breakfast',
                tag: 'Easy',
                description: 'Convenient breakfast at AC Hotel',
                details: 'No travel, relaxed start'
              }
            ]
          },
          {
            id: 'checkout',
            title: 'Hotel Checkout',
            description: 'Pack up and check out',
            selectionType: 'none',
            cards: [
              {
                id: 'hotel-checkout',
                title: 'Check Out (11:00 AM)',
                tag: 'Hotel',
                description: 'Pack bags, check out, load car',
                details: 'Can usually get late checkout if needed'
              }
            ]
          },
          {
            id: 'afternoon',
            title: 'Sunday Afternoon Activities',
            description: 'Before heading home... (Select any)',
            selectionType: 'single',
            cards: [
              {
                id: 'shopping',
                title: 'Shopping in Old Port',
                tag: 'Shopping',
                description: 'Browse unique stores and boutiques',
                details: 'Exchange St, Commercial St, Fore St',
                expandable: true,
                stores: [
                  {
                    id: 'maine-store',
                    name: 'Ferdinand',
                    description: 'Curated Maine-made goods and vintage',
                    location: '243 Congress St'
                  },
                  {
                    id: 'bookstore',
                    name: 'Longfellow Books',
                    description: 'Independent bookstore',
                    location: '1 Monument Way'
                  },
                  {
                    id: 'outdoor',
                    name: 'Lisa-Marie\'s Made in Maine',
                    description: 'Local artisan products',
                    location: '46 Exchange St'
                  },
                  {
                    id: 'vintage',
                    name: 'Blanche & Mimi',
                    description: 'Vintage clothing and accessories',
                    location: '25 Exchange St'
                  },
                  {
                    id: 'mens',
                    name: 'OTB',
                    description: 'Men\'s clothing and accessories',
                    location: '10 Moulton St'
                  },
                  {
                    id: 'record',
                    name: 'Bull Moose Music',
                    description: 'Records, CDs, books, movies',
                    location: '151 Middle St'
                  }
                ]
              },
              {
                id: 'museum',
                title: 'Portland Museum of Art',
                tag: 'Culture',
                description: 'Art museum with strong regional collection',
                details: '7 Congress Square ‚Ä¢ 10am-6pm Sunday',
                links: [
                  { text: 'Website', url: 'https://www.portlandmuseum.org' }
                ]
              },
              {
                id: 'eastern-prom',
                title: 'Eastern Promenade',
                tag: 'Outdoors',
                description: 'Waterfront park with harbor views',
                details: 'Great for a walk before leaving town'
              },
              {
                id: 'coffee-final',
                title: 'Final Coffee Stop',
                tag: 'Coffee',
                description: 'Grab coffee for the road',
                details: 'Tandem Coffee, Coffee by Design, or Arabica'
              }
            ]
          }
        ]
      },

      // ============================================
      // TAB 4: HEADING HOME
      // ============================================
      headingHome: {
        sections: [
          {
            id: 'fun-stops',
            title: 'Fun Stops on the Way Home',
            description: 'Break up the drive back (Select any)',
            selectionType: 'single',
            cards: [
              {
                id: 'freeport',
                title: 'Freeport Outlets',
                tag: 'Shopping',
                description: 'L.L.Bean flagship and outlet shopping',
                details: '20 min south of Portland ‚Ä¢ L.L.Bean open 24/7',
                links: [
                  { text: 'L.L.Bean', url: 'https://www.llbean.com/llb/shop/518672' }
                ]
              },
              {
                id: 'kennebunkport',
                title: 'Kennebunkport',
                tag: 'Scenic',
                description: 'Charming coastal town worth a stroll',
                details: '30 min south of Portland ‚Ä¢ Dock Square, ocean views'
              }
            ]
          },
          {
            id: 'playlists',
            title: 'Road Trip Playlists',
            description: 'Music for the drive home (Select any)',
            selectionType: 'single',
            cards: [
              {
                id: 'playlist-chill',
                title: 'Chill Vibes',
                tag: 'Relaxed',
                description: 'Mellow tunes for a relaxed drive home'
              },
              {
                id: 'playlist-energy',
                title: 'Energy Boost',
                tag: 'Upbeat',
                description: 'Upbeat music to keep energy up'
              },
              {
                id: 'playlist-throwback',
                title: 'Throwback Hits',
                tag: 'Nostalgia',
                description: 'Classic hits and sing-alongs'
              },
              {
                id: 'podcast',
                title: 'Podcast Time',
                tag: 'Audio',
                description: 'Catch up on favorite podcasts'
              }
            ]
          }
        ]
      }
    };

    // ============================================
    // STATE MANAGEMENT
    // ============================================
    let selections = {
      headingOut: {},
      saturdayNight: {},
      sunday: {},
      headingHome: {}
    };

    // Load saved selections from localStorage
    function loadSelections() {
      const saved = localStorage.getItem('lev-bday-2025');
      if (saved) {
        try {
          selections = JSON.parse(saved);
        } catch (e) {
          console.error('Error loading selections:', e);
        }
      }
    }

    // Save selections to localStorage
    function saveSelections() {
      localStorage.setItem('lev-bday-2025', JSON.stringify(selections));
    }

    // ============================================
    // RENDERING FUNCTIONS
    // ============================================

    function renderCard(card, sectionId, selectionType, tabKey) {
      const isSelected = selections[tabKey][sectionId]?.includes(card.id);

      let html = `
        <div class="card ${isSelected ? 'selected' : ''}"
             data-card-id="${card.id}"
             data-section-id="${sectionId}"
             data-selection-type="${selectionType}"
             data-tab-key="${tabKey}">
          <div class="card-tag">${card.tag}</div>
          <div class="card-title">${card.title}</div>
          ${card.description ? `<div class="card-description">${card.description}</div>` : ''}
          ${card.details ? `<div class="card-details">${card.details}</div>` : ''}
      `;

      // Quick link buttons
      if (card.address || (card.links && card.links.length > 0)) {
        html += '<div class="card-quick-links">';

        // Directions button
        if (card.address) {
          const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(card.address)}`;
          html += `<a href="${mapsUrl}" class="quick-link-btn" target="_blank" onclick="event.stopPropagation()">üìç Directions</a>`;
        }

        // Website and Tickets buttons
        if (card.links && card.links.length > 0) {
          card.links.forEach(link => {
            if (link.text.toLowerCase().includes('ticket')) {
              html += `<a href="${link.url}" class="quick-link-btn" target="_blank" onclick="event.stopPropagation()">üéüÔ∏è Tickets</a>`;
            } else if (link.text.toLowerCase().includes('website') || link.text.toLowerCase().includes('site')) {
              html += `<a href="${link.url}" class="quick-link-btn" target="_blank" onclick="event.stopPropagation()">üåê Website</a>`;
            } else {
              html += `<a href="${link.url}" class="quick-link-btn" target="_blank" onclick="event.stopPropagation()">üåê ${link.text}</a>`;
            }
          });
        }

        html += '</div>';
      }

      // Shopping stores expandable
      if (card.stores && card.stores.length > 0) {
        const expandId = `expand-${card.id}`;
        html += `
          <button class="expand-button ${isSelected ? 'enabled' : ''}" id="expand-btn-${card.id}" onclick="toggleExpand('${expandId}', event)">
            ${isSelected ? 'Show Store Details ‚ñº' : 'Select to see store options'}
          </button>
          <div class="expandable-content ${isSelected ? 'show' : ''}" id="${expandId}">
        `;

        card.stores.forEach(store => {
          const storeSelected = selections[tabKey][`${sectionId}-stores`]?.includes(store.id);
          html += `
            <div class="mini-card ${storeSelected ? 'selected' : ''}"
                 data-card-id="${store.id}"
                 data-section-id="${sectionId}-stores"
                 data-selection-type="multiple"
                 onclick="handleCardClick('${sectionId}-stores', '${store.id}', 'multiple', '${tabKey}', event)">
              <div class="mini-card-title">${store.name}</div>
              <div class="mini-card-description">${store.description}</div>
              <div class="card-details">${store.location}</div>
            </div>
          `;
        });

        html += '</div>';
      }

      html += '</div>';
      return html;
    }

    function renderSection(section, tabKey) {
      let html = `
        <div class="section">
          <h2 class="section-title">${section.title}</h2>
          ${section.description ? `<div class="section-description">${section.description}</div>` : ''}
          <div class="card-grid">
      `;

      section.cards.forEach(card => {
        html += renderCard(card, section.id, section.selectionType, tabKey);
      });

      html += '</div>';

      // Late night expandable (shows after selecting a show)
      if (section.expandable && section.expandCondition === 'show-selected') {
        const showSelected = selections[tabKey]['show'] && selections[tabKey]['show'].length > 0;
        html += `
          <div class="expandable-content ${showSelected ? 'show' : ''}" id="expand-late-night">
            <!-- Late night cards already rendered above -->
          </div>
        `;
      }

      html += '</div>';
      return html;
    }

    function renderTab(tabKey, tabData) {
      let html = `<div class="tab-content" id="tab-${tabKey}">`;

      tabData.sections.forEach(section => {
        // Handle late night expandable section
        if (section.expandable && section.expandCondition === 'show-selected') {
          const showSelected = selections[tabKey]['show'] && selections[tabKey]['show'].length > 0;
          if (showSelected) {
            html += renderSection(section, tabKey);
          }
        } else {
          html += renderSection(section, tabKey);
        }
      });

      html += '</div>';
      return html;
    }

    function renderAllTabs() {
      const container = document.getElementById('tab-container');
      let html = '';

      html += renderTab('heading-out', CONTENT.headingOut);
      html += renderTab('saturday-night', CONTENT.saturdayNight);
      html += renderTab('sunday', CONTENT.sunday);
      html += renderTab('heading-home', CONTENT.headingHome);

      container.innerHTML = html;

      // Show first tab by default
      document.querySelector('.tab-content').classList.add('active');

      // Attach click handlers to all cards
      attachCardHandlers();
    }

    // ============================================
    // EVENT HANDLERS
    // ============================================

    function attachCardHandlers() {
      document.querySelectorAll('.card').forEach(card => {
        if (card.dataset.selectionType !== 'none') {
          card.addEventListener('click', (e) => {
            const sectionId = card.dataset.sectionId;
            const cardId = card.dataset.cardId;
            const selectionType = card.dataset.selectionType;
            const tabKey = getCurrentTab();
            handleCardClick(sectionId, cardId, selectionType, tabKey, e);
          });
        }
      });
    }

    function getCurrentTab() {
      const activeTab = document.querySelector('.tab-button.active');
      return activeTab ? activeTab.dataset.tab : 'heading-out';
    }

    function handleCardClick(sectionId, cardId, selectionType, tabKey, event) {
      if (event) event.stopPropagation();

      if (!selections[tabKey][sectionId]) {
        selections[tabKey][sectionId] = [];
      }

      if (selectionType === 'single') {
        // Radio button behavior
        selections[tabKey][sectionId] = [cardId];
      } else {
        // Multiple selection
        const index = selections[tabKey][sectionId].indexOf(cardId);
        if (index > -1) {
          selections[tabKey][sectionId].splice(index, 1);
        } else {
          selections[tabKey][sectionId].push(cardId);
        }
      }

      saveSelections();
      renderAllTabs();
      updateSummary();

      // Restore active tab
      switchTab(tabKey);

      // Handle expandables
      if (sectionId === 'show') {
        updateLateNightVisibility();
      }
    }

    function toggleExpand(expandId, event) {
      event.stopPropagation();
      const element = document.getElementById(expandId);
      element.classList.toggle('show');
    }

    function updateLateNightVisibility() {
      const showSelected = selections.saturdayNight['show'] && selections.saturdayNight['show'].length > 0;
      const lateNightSection = document.getElementById('expand-late-night');
      if (lateNightSection) {
        if (showSelected) {
          lateNightSection.classList.add('show');
        } else {
          lateNightSection.classList.remove('show');
        }
      }
    }

    // ============================================
    // SUMMARY PANEL
    // ============================================

    function updateSummary() {
      const summaryContent = document.getElementById('summary-content');
      let html = '';
      let hasSelections = false;

      // Helper to convert kebab-case to camelCase
      function toCamelCase(str) {
        return str.replace(/-([a-z])/g, (g) => g[1].toUpperCase());
      }

      // Helper to get card info by ID
      function getCardInfo(tabKey, sectionId, cardId) {
        const camelKey = toCamelCase(tabKey);
        const tab = CONTENT[camelKey];
        if (!tab) return { title: cardId, time: '' };

        for (const section of tab.sections) {
          if (section.id === sectionId) {
            const card = section.cards.find(c => c.id === cardId);
            if (card) return { title: card.title, time: card.time || '', card: card };
          }

          // Check stores
          for (const card of section.cards) {
            if (card.stores && sectionId.includes('stores')) {
              const store = card.stores.find(s => s.id === cardId);
              if (store) return { title: store.name, time: '', isStore: true };
            }
          }
        }
        return { title: cardId, time: '' };
      }

      // Collect all selections organized by day
      const saturday = [];
      const sunday = [];

      // Helper to add item to day array
      function addItem(dayArray, tabKey, sectionId, cardIds) {
        if (cardIds.length === 0) return;

        const cardId = cardIds[0];
        const info = getCardInfo(tabKey, sectionId, cardId);
        const camelKey = toCamelCase(tabKey);

        // Check if this is shopping with stores selected
        if (info.card && info.card.stores && selections[camelKey][`${sectionId}-stores`]) {
          const storeIds = selections[camelKey][`${sectionId}-stores`];
          const storeNames = storeIds.map(storeId => {
            const storeInfo = getCardInfo(tabKey, `${sectionId}-stores`, storeId);
            return storeInfo.title;
          });
          dayArray.push({
            time: info.time || '',
            title: `${info.title}: ${storeNames.join('; ')};`
          });
        } else {
          dayArray.push({
            time: info.time || '',
            title: info.title
          });
        }
      }

      // Collect Saturday items (Heading Out + Saturday Night)
      for (const [sectionId, cardIds] of Object.entries(selections.headingOut)) {
        addItem(saturday, 'heading-out', sectionId, cardIds);
      }
      for (const [sectionId, cardIds] of Object.entries(selections.saturdayNight)) {
        if (!sectionId.includes('stores')) {
          addItem(saturday, 'saturday-night', sectionId, cardIds);
        }
      }

      // Collect Sunday items (Sunday + Heading Home)
      for (const [sectionId, cardIds] of Object.entries(selections.sunday)) {
        if (!sectionId.includes('stores')) {
          addItem(sunday, 'sunday', sectionId, cardIds);
        }
      }
      for (const [sectionId, cardIds] of Object.entries(selections.headingHome)) {
        addItem(sunday, 'heading-home', sectionId, cardIds);
      }

      // Render Saturday
      if (saturday.length > 0) {
        html += '<div class="summary-day">SATURDAY</div>';
        saturday.forEach(item => {
          const timeStr = item.time ? item.time.padEnd(7) : '       ';
          html += `<div class="summary-item">${timeStr} ${item.title}</div>`;
          hasSelections = true;
        });
      }

      // Render Sunday
      if (sunday.length > 0) {
        html += '<div class="summary-day">SUNDAY</div>';
        sunday.forEach(item => {
          const timeStr = item.time ? item.time.padEnd(7) : '       ';
          html += `<div class="summary-item">${timeStr} ${item.title}</div>`;
          hasSelections = true;
        });
      }

      if (!hasSelections) {
        summaryContent.innerHTML = '<div class="summary-empty">Make selections below to build your weekend!</div>';
      } else {
        summaryContent.innerHTML = html;
      }
    }

    // ============================================
    // TAB SWITCHING
    // ============================================

    function switchTab(tabKey) {
      // Update buttons
      document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('active');
      });
      document.querySelector(`[data-tab="${tabKey}"]`).classList.add('active');

      // Update content
      document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
      });
      document.getElementById(`tab-${tabKey}`).classList.add('active');
    }

    // ============================================
    // INITIALIZATION
    // ============================================

    document.addEventListener('DOMContentLoaded', function() {
      // Load saved selections
      loadSelections();

      // Render all tabs
      renderAllTabs();

      // Update summary
      updateSummary();

      // Tab switching
      document.querySelectorAll('.tab-button').forEach(button => {
        button.addEventListener('click', () => {
          const tabKey = button.dataset.tab;
          switchTab(tabKey);
        });
      });

      // Reset button
      document.getElementById('reset-btn').addEventListener('click', () => {
        if (confirm('Reset all selections? This cannot be undone.')) {
          selections = {
            headingOut: {},
            saturdayNight: {},
            sunday: {},
            headingHome: {}
          };
          saveSelections();
          renderAllTabs();
          updateSummary();
          switchTab('heading-out');
        }
      });
    });
  </script>
</body>
</html>