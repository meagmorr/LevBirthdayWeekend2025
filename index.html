<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Lev's Birthday Weekend â€“ Portland 2025</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #1a0a28;
      --bg-alt: #2a1640;
      --card: #3d1f52;
      --accent: #4ade80;
      --accent-soft: rgba(74, 222, 128, 0.18);
      --accent-strong: #22c55e;
      --text-main: #f9fafb;
      --text-muted: #d4c5e6;
      --border-subtle: rgba(168, 85, 247, 0.4);
      --danger: #fb7185;
      --shadow-soft: 0 18px 40px rgba(26, 10, 40, 0.9);
      --radius-lg: 18px;
      --radius-pill: 999px;
      --maroon: #6b2240;
      --navy: #1e1b4b;
      --purple: #581c87;
      --green-highlight: #34d399;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top, var(--maroon) 0, var(--navy) 45%, #000 100%);
      color: var(--text-main);
      min-height: 100vh;
      padding: 32px 16px 40px;
      display: flex;
      justify-content: center;
    }

    .page {
      width: 100%;
      max-width: 980px;
      background: linear-gradient(135deg, #0a0415 0%, #1a0a28 40%, #0f0820 100%);
      border-radius: 28px;
      border: 1px solid rgba(139, 92, 246, 0.4);
      box-shadow: var(--shadow-soft);
      overflow: hidden;
      position: relative;
    }

    .page::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background:
        radial-gradient(circle at 8% 0%, rgba(52, 211, 153, 0.15) 0, transparent 55%),
        radial-gradient(circle at 100% 10%, rgba(34, 197, 94, 0.12) 0, transparent 50%);
      mix-blend-mode: screen;
    }

    .inner {
      position: relative;
      padding: 28px 22px 30px;
    }

    @media (min-width: 768px) {
      body { padding: 40px 24px; }
      .inner { padding: 32px 32px 34px; }
    }

    header {
      display: grid;
      gap: 20px;
      margin-bottom: 24px;
    }

    @media (min-width: 768px) {
      header {
        grid-template-columns: 1fr 360px;
        gap: 24px;
        align-items: start;
      }
    }

    .title-block {
      min-width: 0;
    }

    .left-column {
      display: grid;
      gap: 12px;
    }

    .right-column {
      display: none;
    }

    @media (min-width: 768px) {
      .right-column {
        display: block;
      }
    }

    .eyebrow {
      font-size: 11px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 6px;
    }

    .pill-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--accent-strong);
      box-shadow: 0 0 12px rgba(34, 197, 94, 0.8);
    }

    h1 {
      font-size: clamp(28px, 4vw + 16px, 42px);
      line-height: 1.1;
      font-weight: 700;
      letter-spacing: -0.01em;
      margin-bottom: 6px;
    }

    .subtitle {
      font-size: 14px;
      color: var(--text-muted);
    }

    .meta {
      background: rgba(88, 28, 135, 0.3);
      border-radius: 18px;
      padding: 14px 16px;
      border: 1px solid rgba(139, 92, 246, 0.5);
      display: grid;
      gap: 10px;
      max-width: 100%;
      font-size: 12px;
    }

    .meta-row {
      display: grid;
      gap: 4px;
    }

    .meta-label {
      text-transform: uppercase;
      letter-spacing: 0.11em;
      font-size: 10px;
      color: var(--text-muted);
    }

    .meta-value {
      font-weight: 500;
    }

    .meta-value strong {
      color: var(--accent);
      font-weight: 600;
    }

    .meta-value a {
      color: var(--accent);
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .meta-value a:hover {
      color: var(--accent-strong);
      text-decoration: underline;
    }

    .map-button {
      margin-top: 12px;
      padding: 14px 18px;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(52, 211, 153, 0.25), rgba(16, 185, 129, 0.15));
      border: 2px solid rgba(52, 211, 153, 0.7);
      color: var(--text-main);
      text-decoration: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .map-button:hover {
      background: linear-gradient(135deg, rgba(52, 211, 153, 0.35), rgba(16, 185, 129, 0.25));
      border-color: rgba(52, 211, 153, 0.9);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(52, 211, 153, 0.3);
    }

    .map-button-content {
      flex: 1;
    }

    .map-button-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--accent);
      margin-bottom: 2px;
    }

    .map-button-subtitle {
      font-size: 11px;
      color: var(--text-muted);
    }

    .map-button-icon {
      font-size: 24px;
      opacity: 0.8;
    }

    .sticky-note {
      margin-top: 12px;
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid rgba(139, 92, 246, 0.4);
      background: rgba(42, 22, 64, 0.4);
      font-size: 12px;
      color: var(--text-muted);
      max-width: 520px;
    }

    .sticky-note strong {
      color: #a7f3d0;
      font-weight: 600;
    }

    .itinerary-summary {
      padding: 18px 20px;
      border-radius: 18px;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(5, 150, 105, 0.1));
      border: 2px solid rgba(52, 211, 153, 0.6);
      display: none;
    }

    .itinerary-summary.has-items {
      display: block;
    }

    .itinerary-summary-title {
      font-size: 14px;
      font-weight: 700;
      color: var(--text-main);
      margin-bottom: 14px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .itinerary-list {
      list-style: none;
      display: grid;
      gap: 6px;
      font-size: 13px;
      color: var(--text-main);
    }

    .itinerary-list li {
      display: flex;
      gap: 8px;
      align-items: baseline;
    }

    .itinerary-list li.day-header {
      font-weight: 700;
      font-size: 18px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--accent);
      margin-top: 16px;
      padding-bottom: 8px;
      border-bottom: none;
    }

    .itinerary-list li.day-header:first-child {
      margin-top: 0;
    }

    .itinerary-time {
      color: var(--green-highlight);
      font-weight: 500;
      min-width: 80px;
    }

    .itinerary-item {
      color: #d1fae5;
    }

    .section {
      margin-top: 26px;
      padding-top: 4px;
      border-top: 1px solid rgba(139, 92, 246, 0.3);
    }

    .section > .section-header {
      margin-bottom: 16px;
    }

    .section > .section-header .section-title {
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-main);
      margin-bottom: 8px;
    }

    .section > .section-header .section-subtitle {
      font-size: 13px;
      color: var(--text-muted);
      max-width: 600px;
    }

    .day-section-header {
      font-size: clamp(28px, 4vw + 16px, 42px);
      line-height: 1.1;
      font-weight: 700;
      letter-spacing: -0.01em;
      margin-bottom: 10px;
      color: var(--text-main);
      margin-top: 24px;
    }

    .day-section-header:first-of-type {
      margin-top: 18px;
    }

    .section-header {
      margin-bottom: 12px;
    }

    .section-title {
      font-size: 13px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--text-muted);
      font-weight: 600;
    }

    .section-subtitle {
      font-size: 12px;
      color: var(--text-muted);
    }

    .section-subtitle strong {
      color: var(--accent);
      font-weight: 500;
    }

    .timeline {
      display: grid;
      gap: 10px;
      font-size: 13px;
    }

    .timeline-row {
      display: grid;
      grid-template-columns: 64px minmax(0, 1fr);
      gap: 8px;
      align-items: stretch;
    }

    .time-pill {
      align-self: stretch;
      border-radius: 999px;
      background: rgba(42, 22, 64, 0.9);
      border: 1px solid rgba(139, 92, 246, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 500;
      color: var(--text-muted);
      padding: 4px 0;
    }

    .timeline-card {
      background: linear-gradient(
          135deg,
          rgba(42, 22, 64, 0.96),
          rgba(30, 27, 75, 0.86)
        );
      border-radius: 14px;
      padding: 10px 50px 9px 11px;
      border: 1px solid rgba(139, 92, 246, 0.45);
      display: grid;
      gap: 4px;
      position: relative;
      overflow: hidden;
    }

    .timeline-card.booked {
      border-color: rgba(34, 197, 94, 0.9);
      box-shadow: 0 0 0 1px rgba(22, 163, 74, 0.75);
    }

    .timeline-card::before {
      content: "";
      position: absolute;
      inset: -10%;
      opacity: 0.4;
      background:
        radial-gradient(circle at 0 0, rgba(52, 211, 153, 0.32), transparent 54%),
        radial-gradient(circle at 100% 120%, rgba(34, 197, 94, 0.28), transparent 56%);
      mix-blend-mode: soft-light;
      pointer-events: none;
    }

    .timeline-main {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      align-items: baseline;
    }

    .timeline-title {
      font-size: 13px;
      font-weight: 550;
    }

    .walk-pill {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(139, 92, 246, 0.7);
      color: var(--text-muted);
      background: rgba(42, 22, 64, 0.9);
      white-space: nowrap;
    }

    .timeline-detail {
      position: relative;
      z-index: 1;
      font-size: 12px;
      color: var(--text-muted);
    }

    .choice-grid {
      display: grid;
      gap: 10px;
    }

    @media (min-width: 720px) {
      .choice-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .choice-card {
      position: relative;
      border-radius: 16px;
      padding: 11px 12px 10px;
      background: radial-gradient(circle at 0 0, rgba(52, 211, 153, 0.15), transparent 50%),
        radial-gradient(circle at 100% 120%, rgba(88, 28, 135, 0.5), transparent 60%),
        linear-gradient(145deg, var(--navy), var(--bg));
      border: 1px solid rgba(139, 92, 246, 0.4);
      box-shadow: 0 14px 30px rgba(26, 10, 40, 0.9);
      overflow: hidden;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .choice-card:hover {
      border-color: rgba(139, 92, 246, 0.6);
      transform: translateY(-2px);
    }

    .choice-card.booked {
      border-color: rgba(34, 197, 94, 0.9);
      box-shadow: 0 0 0 1px rgba(22, 163, 74, 0.75),
        0 18px 40px rgba(22, 163, 74, 0.7);
    }

    .choice-card.booked:hover {
      border-color: rgba(34, 197, 94, 1);
    }

    .star-button {
      position: absolute;
      top: 10px;
      right: 10px;
      border: none;
      background: rgba(42, 22, 64, 0.9);
      border: 1px solid rgba(139, 92, 246, 0.6);
      border-radius: 8px;
      width: 32px;
      height: 32px;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 18px;
      color: var(--text-muted);
      transition: all 0.2s ease;
      z-index: 10;
      display: none;
      pointer-events: none;
    }

    .choice-card.booked .star-button {
      display: flex;
    }

    .star-button.selected {
      background: rgba(22, 163, 74, 0.2);
      border-color: rgba(34, 197, 94, 0.9);
      color: var(--accent-strong);
    }

    .star-button.auto-selected {
      display: flex;
      background: rgba(22, 163, 74, 0.15);
      border-color: rgba(34, 197, 94, 0.7);
      color: var(--accent-strong);
      cursor: default;
    }

    .choice-tag-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }

    .choice-tag {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--text-muted);
    }

    .booked-badge {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(22, 163, 74, 0.18);
      border: 1px solid rgba(34, 197, 94, 0.9);
      color: #bbf7d0;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .booked-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 4px rgba(22, 163, 74, 0.9);
    }

    .choice-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .choice-meta {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .choice-list {
      list-style: none;
      font-size: 12px;
      color: var(--text-muted);
      display: grid;
      gap: 2px;
      margin-bottom: 8px;
    }

    .choice-list li::before {
      content: "â€¢ ";
      color: var(--green-highlight);
      margin-right: 2px;
    }

    .choice-cta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-top: 4px;
    }

    .choice-checkbox-row {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .choice-checkbox {
      width: 14px;
      height: 14px;
      border-radius: 4px;
      border: 1px solid rgba(139, 92, 246, 0.8);
      appearance: none;
      background: rgba(42, 22, 64, 0.95);
      cursor: pointer;
      display: inline-block;
      position: relative;
    }

    .choice-checkbox:checked {
      background: var(--accent-strong);
      border-color: var(--accent-strong);
      box-shadow: 0 0 0 1px rgba(22, 163, 74, 0.3);
    }

    .choice-checkbox:checked::after {
      content: "";
      position: absolute;
      inset: 3px;
      border-radius: 2px;
      border: 2px solid #022c22;
      border-top: none;
      border-right: none;
      transform: rotate(-45deg);
    }

    .choice-note {
      font-size: 11px;
      color: #e5e7eb;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(42, 22, 64, 0.95);
      border: 1px solid rgba(139, 92, 246, 0.5);
    }

    .note-soft {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }

    .pill {
      font-size: 11px;
      padding: 3px 9px;
      border-radius: 999px;
      background: rgba(42, 22, 64, 0.9);
      border: 1px solid rgba(139, 92, 246, 0.4);
      color: var(--text-muted);
    }

    .pill.accent {
      background: rgba(52, 211, 153, 0.16);
      border-color: rgba(52, 211, 153, 0.8);
      color: #d1fae5;
    }

    .quick-links {
      display: flex;
      gap: 6px;
      margin-top: 8px;
      flex-wrap: wrap;
    }

    .quick-link {
      font-size: 10px;
      padding: 4px 8px;
      border-radius: 8px;
      background: rgba(42, 22, 64, 0.9);
      border: 1px solid rgba(139, 92, 246, 0.5);
      color: var(--text-muted);
      text-decoration: none;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 3px;
    }

    .quick-link:hover {
      background: rgba(42, 22, 64, 1);
      border-color: rgba(139, 92, 246, 0.8);
      color: var(--text-main);
    }

    .footer-note {
      margin-top: 22px;
      font-size: 11px;
      color: var(--text-muted);
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
    }

    .save-status {
      font-size: 11px;
      color: #c4b5d6;
    }

    .save-status span {
      opacity: 0.65;
    }

    .reset-btn {
      border: none;
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      font-size: 11px;
      background: rgba(42, 22, 64, 0.92);
      color: var(--text-muted);
      border: 1px solid rgba(139, 92, 246, 0.6);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .reset-btn:hover {
      background: rgba(42, 22, 64, 1);
      color: #fee2e2;
      border-color: rgba(248, 113, 113, 0.9);
      box-shadow: 0 0 0 1px rgba(248, 113, 113, 0.5);
    }

    .mini-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(248, 113, 113, 0.8);
    }

    .print-hint {
      font-size: 11px;
      color: var(--text-muted);
    }

    .print-hint strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    @media print {
      body {
        background: #fff;
        padding: 0;
      }
      .page {
        box-shadow: none;
        border-radius: 0;
        border: none;
      }
      .inner {
        padding: 16px 18px;
      }
      .save-status,
      .reset-btn {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <main class="page">
    <div class="inner">
      <header>
        <div class="left-column">
          <div class="title-block">
            <div class="eyebrow">
              <span class="pill-dot"></span>
              <span>Dec 20-21, 2025 Â· Portland, ME</span>
            </div>
            <h1>35th Birthday Weekend</h1>
            <p class="subtitle">
              Portland awaits. Options selected especially for you! Differentiated by vibes to (hopefully) make choosing easy-peasy!
            </p>
          </div>
          <div class="meta">
            <div class="meta-row">
              <div class="meta-label">Accomidations</div>
              <div class="meta-value">AC Hotel Portland Downtown/Waterfront</div>
            </div>
            <div class="meta-row">
              <div class="meta-label">Goal</div>
              <div class="meta-value">Kicking off your 35th rotation around the sun!</div>
            </div>
            <div class="meta-row">
              <div class="meta-label">How this works</div>
              <div class="meta-value">Below is an interactive itinerary curated just for you (by yours truly). Scope out the options, use the quick links to satisfy your curiosity and get additional details. Simply select what looks good to you and the schedule will update automatically. Come back to this page anytime, it saves your picks automatically. <strong>No login, no fuss.</strong></div>
            </div>
            <div class="meta-row">
              <div class="meta-label">Small Heads Up</div>
              <div class="meta-value">Your girl made some reservations ahead of time to be sure you had the best to choose from. <stonrg>By Friday, December 19th, kindly send her a screenshot of the schedule you'd like so she can adjust accordinly.</stonrg></div>
            </div>
          </div>
          <a href="https://maps.app.goo.gl/qncvtMqeFtQFpso37" target="_blank" rel="noopener" class="map-button">
            <div class="map-button-content">
              <div class="map-button-title">Portland Favorites Map</div>
              <div class="map-button-subtitle">All the spots we've curated â€” food, drinks, shops & more</div>
            </div>
            <div class="map-button-icon">ğŸ—ºï¸</div>
          </a>
        </div>
        <div class="right-column">
          <div class="itinerary-summary" id="itinerary-summary">
            <div class="itinerary-summary-title">ğŸ”¥ SELECTED OPTIONS</div>
            <ul class="itinerary-list" id="itinerary-list">
              <!-- Dynamically populated -->
            </ul>
          </div>
        </div>
      </header>

      <section class="section" id="saturday">
        <div class="section-header">
          <div class="section-title">Saturday Â· Let's Go</div>
        </div>
        <p class="section-subtitle" style="margin-bottom: 18px;">
          Hotel, dinner & show are set. <strong>Pick from activities below, or just relax before check-in.</strong>
        </p>

        <!-- Saturday Activities -->
        <h2 class="day-section-header">Saturday Activities</h2>
        <p class="section-subtitle" style="margin-bottom: 18px;">Pick whatever sounds good before or after check-in</p>
        <div class="choice-grid">
          <article class="choice-card" data-choice-id="victoria-mansion-sat" data-name="Victoria Mansion" data-time="Saturday 10:00am" data-activity="Victoria Mansion tour">
            <button type="button" class="star-button" data-fav-button="activities-sat" data-fav-id="victoria-mansion-sat">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Museum & History</span>
            </div>
            <h2 class="choice-title">Victoria Mansion</h2>
            <p class="choice-meta">Victorian-era house museum</p>
            <ul class="choice-list">
              <li>Stunning Victorian architecture and holiday decor</li>
              <li>Purchase tickets for your preferred entry time</li>
              <li>Available both Saturday and Sunday</li>
            </ul>
            <div class="quick-links">
              <a href="https://maps.app.goo.gl/EnE277KkfbquWMmN7" class="quick-link" target="_blank" rel="noopener">ğŸ“ Directions</a>
              <a href="https://victoriamansion.org/" class="quick-link" target="_blank" rel="noopener">ğŸŒ Website</a>
              <a href="https://victoriamansion.org/visit-us/" class="quick-link" target="_blank" rel="noopener">ğŸŸï¸ Tickets</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="pma-film-sat" data-name="Portland Museum of Art" data-time="Saturday 12:00pm" data-activity="PMA Film: Safe (1995)">
            <button type="button" class="star-button" data-fav-button="activities-sat" data-fav-id="pma-film-sat">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Film & Art</span>
            </div>
            <h2 class="choice-title">Portland Museum of Art: Safe (1995)</h2>
            <p class="choice-meta">Noon â€“ 2:05pm Â· Introduction by Xander Berkeley</p>
            <ul class="choice-list">
              <li>Classic 1995 film with special introduction</li>
              <li>Available both Saturday and Sunday</li>
              <li>Perfect for a rainy afternoon</li>
            </ul>
            <div class="quick-links">
              <a href="https://maps.app.goo.gl/4mF7G9jUJmg1YL3JA" class="quick-link" target="_blank" rel="noopener">ğŸ“ Directions</a>
              <a href="https://www.portlandmuseum.org/" class="quick-link" target="_blank" rel="noopener">ğŸŒ Museum</a>
              <a href="https://www.portlandmuseum.org/eventscalendar/safe-4" class="quick-link" target="_blank" rel="noopener">ğŸŸï¸ Tickets</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="frost-factory-sat" data-name="Frost Factory" data-time="Saturday 12:00pm" data-activity="Frost Factory visit">
            <button type="button" class="star-button" data-fav-button="activities-sat" data-fav-id="frost-factory-sat">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Cannabis Dispensary</span>
            </div>
            <h2 class="choice-title">Frost Factory</h2>
            <p class="choice-meta">South Portland Â· 10amâ€“8pm</p>
            <ul class="choice-list">
              <li>Matt's favorite dispensary â€” preorder online</li>
              <li>Loyalty members get a birthday gift!</li>
              <li>Available both Saturday and Sunday</li>
            </ul>
            <div class="quick-links">
              <a href="https://maps.app.goo.gl/D4ik3m1t8gCvXvjn8" class="quick-link" target="_blank" rel="noopener">ğŸ“ Directions</a>
              <a href="https://thefrostfactory.com/" class="quick-link" target="_blank" rel="noopener">ğŸŒ Website</a>
              <a href="https://weedmaps.com/dispensaries/the-frost-factory-2" class="quick-link" target="_blank" rel="noopener">ğŸŸï¸ Preorder</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="old-port-sat" data-name="Explore Old Port" data-time="Saturday 1:00pm" data-activity="Old Port exploring & lobster trap trees">
            <button type="button" class="star-button" data-fav-button="activities-sat" data-fav-id="old-port-sat">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Wander & Explore</span>
            </div>
            <h2 class="choice-title">Explore Old Port & Lobster Trap Trees</h2>
            <p class="choice-meta">Waterfront & downtown</p>
            <ul class="choice-list">
              <li>See the famous lobster trap holiday trees</li>
              <li>Browse shops, galleries, and waterfront</li>
              <li>Perfect for wandering at your own pace</li>
            </ul>
            <div class="quick-links">
              <a href="https://maps.app.goo.gl/TMwTqYxuPjjMQEmZA" class="quick-link" target="_blank" rel="noopener">ğŸ“ Old Port Wharf</a>
              <a href="https://92moose.fm/lobster-trap-christmas-trees-maine/" class="quick-link" target="_blank" rel="noopener">ğŸŒ About the Trees</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="ice-skating-sat" data-name="Ice Skating" data-time="Saturday 2:00pm" data-activity="Ice skating at Thompson's Point">
            <button type="button" class="star-button" data-fav-button="activities-sat" data-fav-id="ice-skating-sat">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Active & Fun</span>
            </div>
            <h2 class="choice-title">Ice Skating at Thompson's Point</h2>
            <p class="choice-meta">$18 including skate rentals Â· 1.5-2 hour sessions</p>
            <ul class="choice-list">
              <li>Timed entry sessions, book in advance</li>
              <li>Heated bathrooms (important!)</li>
              <li>Tickets available Sunday, Dec 14th at 5pm</li>
            </ul>
            <div class="quick-links">
              <a href="https://maps.app.goo.gl/8Ma9LMGf2gbAeeZc9" class="quick-link" target="_blank" rel="noopener">ğŸ“ Directions</a>
              <a href="http://www.thompsonspointrink.com/" class="quick-link" target="_blank" rel="noopener">ğŸŒ Website</a>
              <a href="https://www.thompsonspointrink.com/iceschedule" class="quick-link" target="_blank" rel="noopener">ğŸŸï¸ Book Session</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="washington-baths-sat" data-name="Washington Baths" data-time="Saturday 12:00pm" data-activity="Sauna & cold plunge at Washington Baths">
            <button type="button" class="star-button" data-fav-button="activities-sat" data-fav-id="washington-baths-sat">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Relax & Recharge</span>
            </div>
            <h2 class="choice-title">Washington Baths</h2>
            <p class="choice-meta">$36/person Â· No time limit</p>
            <ul class="choice-list">
              <li>Sauna, cold plunge, hot pool, and relaxation</li>
              <li>Saturday: 12pm-9pm Â· Sunday: 7am-12pm (Winter Solstice!)</li>
              <li>No reservations, all genders welcome</li>
              <li>Bring bathing suit, towel, sandals (towels $3 to rent)</li>
            </ul>
            <div class="quick-links">
              <a href="https://washingtonbaths.com/" class="quick-link" target="_blank" rel="noopener">ğŸŒ Website</a>
              <a href="https://washingtonbaths.com/faq.html" class="quick-link" target="_blank" rel="noopener">ğŸŒ FAQs</a>
            </div>
          </article>
        </div>

        <!-- Hotel Check-in -->
        <div class="section-header" style="margin-top:18px;">
          <div class="section-title">Check-In</div>
        </div>
        <div class="timeline">
          <div class="timeline-row">
            <div class="time-pill">3:00</div>
            <div class="timeline-card booked" data-choice-id="hotel-checkin" data-name="AC Hotel" data-time="Saturday 3:00pm" data-activity="Hotel check-in" data-auto-selected="true">
              <button type="button" class="star-button auto-selected selected" data-fav-button="hotel" data-fav-id="hotel-checkin" data-auto-selected="true">â˜…</button>
              <div class="timeline-main">
                <div class="timeline-title">AC Hotel Portland Downtown/Waterfront</div>
                <span class="walk-pill">Waterfront</span>
              </div>
              <p class="timeline-detail">
                Drop your bags, check out the harbor views, get settled.
              </p>
            </div>
          </div>
        </div>

        <!-- Pre-Dinner Options -->
        <div class="section-header" style="margin-top:18px;">
          <div class="section-title">Pre-Dinner</div>
        </div>
        <div class="choice-grid">
          <article class="choice-card" data-choice-id="predinner-explore" data-name="Explore Old Port" data-time="Saturday 4:00pm" data-activity="Old Port exploring">
            <button type="button" class="star-button" data-fav-button="predinner" data-fav-id="predinner-explore">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Wander & explore</span>
            </div>
            <h2 class="choice-title">Explore Old Port</h2>
            <p class="choice-meta">4:00 PM â€“ 5:30 PM</p>
            <ul class="choice-list">
              <li>Details forthcoming</li>
            </ul>
            <div class="quick-links">
              <a href="#" class="quick-link" onclick="return false;">ğŸ“ Directions</a>
              <a href="#" class="quick-link" onclick="return false;">ğŸŒ Webpage</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="predinner-drinks" data-name="Hotel Bar" data-time="Saturday 4:00pm" data-activity="Drinks at hotel bar">
            <button type="button" class="star-button" data-fav-button="predinner" data-fav-id="predinner-drinks">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Relax & unwind</span>
            </div>
            <h2 class="choice-title">Hotel Bar</h2>
            <p class="choice-meta">4:00 PM â€“ 5:30 PM</p>
            <ul class="choice-list">
              <li>Details forthcoming</li>
            </ul>
            <div class="quick-links">
              <a href="#" class="quick-link" onclick="return false;">ğŸ“ Directions</a>
              <a href="#" class="quick-link" onclick="return false;">ğŸŒ Webpage</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="predinner-chill" data-name="Chill in Room" data-time="Saturday 4:00pm" data-activity="Relax in room">
            <button type="button" class="star-button" data-fav-button="predinner" data-fav-id="predinner-chill">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Downtime</span>
            </div>
            <h2 class="choice-title">Chill in Room</h2>
            <p class="choice-meta">4:00 PM â€“ 5:30 PM</p>
            <ul class="choice-list">
              <li>Details forthcoming</li>
            </ul>
            <div class="quick-links">
              <a href="#" class="quick-link" onclick="return false;">ğŸ“ Directions</a>
            </div>
          </article>
        </div>

        <!-- Early Dinner -->
        <div class="section-header" style="margin-top:18px;">
          <div class="section-title">Dinner</div>
        </div>
        <div class="timeline">
          <div class="timeline-row">
            <div class="time-pill">5:30</div>
            <div class="timeline-card booked" data-choice-id="dinner-central" data-name="Central Provisions" data-time="Saturday 5:30pm" data-activity="Early dinner at Central Provisions" data-auto-selected="true">
              <button type="button" class="star-button auto-selected selected" data-fav-button="dinner" data-fav-id="dinner-central" data-auto-selected="true">â˜…</button>
              <div class="timeline-main">
                <div class="timeline-title">Central Provisions</div>
                <span class="walk-pill">Old Port Â· 5 min walk</span>
              </div>
              <p class="timeline-detail">
                Tapas-style shareables, good cocktails. Early dinner to make the show on time.
              </p>
            </div>
          </div>
        </div>

        <!-- Show -->
        <div class="section-header" style="margin-top:18px;">
          <div class="section-title">The Show</div>
        </div>
        <div class="timeline">
          <div class="timeline-row">
            <div class="time-pill">8:00</div>
            <div class="timeline-card booked" data-choice-id="show" data-name="Pink Talking Fish" data-time="Saturday 8:00pm" data-activity="Pink Talking Fish at State Theatre" data-auto-selected="true">
              <button type="button" class="star-button auto-selected selected" data-fav-button="show" data-fav-id="show-ptf" data-auto-selected="true">â˜…</button>
              <div class="timeline-main">
                <div class="timeline-title">Pink Talking Fish Â· State Theatre</div>
                <span class="walk-pill">Doors 7pm Â· Show 8pm</span>
              </div>
              <p class="timeline-detail">
                5 min walk from Central Provisions. After the encore, grab a drink or wander if you're feeling it.
              </p>
            </div>
          </div>
        </div>
      </section>

      <section class="section" id="sunday">
        <div class="section-header">
          <div class="section-title">Sunday Â· Easy Morning</div>
          <p class="section-subtitle">
            <strong>Pick your brunch spot and activities,</strong> or just head home after breakfast!
          </p>
        </div>

        <!-- Sunday Activities -->
        <h2 class="day-section-header">Sunday Activities</h2>
        <p class="section-subtitle" style="margin-bottom: 18px;">Same great options â€” pick what you want to do Sunday</p>
        <div class="choice-grid">
          <article class="choice-card" data-choice-id="victoria-mansion-sun" data-name="Victoria Mansion" data-time="Sunday 10:00am" data-activity="Victoria Mansion tour">
            <button type="button" class="star-button" data-fav-button="activities-sun" data-fav-id="victoria-mansion-sun">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Museum & History</span>
            </div>
            <h2 class="choice-title">Victoria Mansion</h2>
            <p class="choice-meta">Victorian-era house museum</p>
            <ul class="choice-list">
              <li>Stunning Victorian architecture and holiday decor</li>
              <li>Purchase tickets for your preferred entry time</li>
              <li>Available both Saturday and Sunday</li>
            </ul>
            <div class="quick-links">
              <a href="https://maps.app.goo.gl/EnE277KkfbquWMmN7" class="quick-link" target="_blank" rel="noopener">ğŸ“ Directions</a>
              <a href="https://victoriamansion.org/" class="quick-link" target="_blank" rel="noopener">ğŸŒ Website</a>
              <a href="https://victoriamansion.org/visit-us/" class="quick-link" target="_blank" rel="noopener">ğŸŸï¸ Tickets</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="pma-film-sun" data-name="Portland Museum of Art" data-time="Sunday 12:00pm" data-activity="PMA Film: Safe (1995)">
            <button type="button" class="star-button" data-fav-button="activities-sun" data-fav-id="pma-film-sun">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Film & Art</span>
            </div>
            <h2 class="choice-title">Portland Museum of Art: Safe (1995)</h2>
            <p class="choice-meta">Noon â€“ 2:05pm Â· Introduction by Xander Berkeley</p>
            <ul class="choice-list">
              <li>Classic 1995 film with special introduction</li>
              <li>Available both Saturday and Sunday</li>
              <li>Perfect for a rainy afternoon</li>
            </ul>
            <div class="quick-links">
              <a href="https://maps.app.goo.gl/4mF7G9jUJmg1YL3JA" class="quick-link" target="_blank" rel="noopener">ğŸ“ Directions</a>
              <a href="https://www.portlandmuseum.org/" class="quick-link" target="_blank" rel="noopener">ğŸŒ Museum</a>
              <a href="https://www.portlandmuseum.org/eventscalendar/safe-4" class="quick-link" target="_blank" rel="noopener">ğŸŸï¸ Tickets</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="frost-factory-sun" data-name="Frost Factory" data-time="Sunday 12:00pm" data-activity="Frost Factory visit">
            <button type="button" class="star-button" data-fav-button="activities-sun" data-fav-id="frost-factory-sun">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Cannabis Dispensary</span>
            </div>
            <h2 class="choice-title">Frost Factory</h2>
            <p class="choice-meta">South Portland Â· 10amâ€“8pm</p>
            <ul class="choice-list">
              <li>Matt's favorite dispensary â€” preorder online</li>
              <li>Loyalty members get a birthday gift!</li>
              <li>Available both Saturday and Sunday</li>
            </ul>
            <div class="quick-links">
              <a href="https://maps.app.goo.gl/D4ik3m1t8gCvXvjn8" class="quick-link" target="_blank" rel="noopener">ğŸ“ Directions</a>
              <a href="https://thefrostfactory.com/" class="quick-link" target="_blank" rel="noopener">ğŸŒ Website</a>
              <a href="https://weedmaps.com/dispensaries/the-frost-factory-2" class="quick-link" target="_blank" rel="noopener">ğŸŸï¸ Preorder</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="old-port-sun" data-name="Explore Old Port" data-time="Sunday 1:00pm" data-activity="Old Port exploring & lobster trap trees">
            <button type="button" class="star-button" data-fav-button="activities-sun" data-fav-id="old-port-sun">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Wander & Explore</span>
            </div>
            <h2 class="choice-title">Explore Old Port & Lobster Trap Trees</h2>
            <p class="choice-meta">Waterfront & downtown</p>
            <ul class="choice-list">
              <li>See the famous lobster trap holiday trees</li>
              <li>Browse shops, galleries, and waterfront</li>
              <li>Perfect for wandering at your own pace</li>
            </ul>
            <div class="quick-links">
              <a href="https://maps.app.goo.gl/TMwTqYxuPjjMQEmZA" class="quick-link" target="_blank" rel="noopener">ğŸ“ Old Port Wharf</a>
              <a href="https://92moose.fm/lobster-trap-christmas-trees-maine/" class="quick-link" target="_blank" rel="noopener">ğŸŒ About the Trees</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="ice-skating-sun" data-name="Ice Skating" data-time="Sunday 2:00pm" data-activity="Ice skating at Thompson's Point">
            <button type="button" class="star-button" data-fav-button="activities-sun" data-fav-id="ice-skating-sun">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Active & Fun</span>
            </div>
            <h2 class="choice-title">Ice Skating at Thompson's Point</h2>
            <p class="choice-meta">$18 including skate rentals Â· 1.5-2 hour sessions</p>
            <ul class="choice-list">
              <li>Timed entry sessions, book in advance</li>
              <li>Heated bathrooms (important!)</li>
              <li>Tickets available Sunday, Dec 14th at 5pm</li>
            </ul>
            <div class="quick-links">
              <a href="https://maps.app.goo.gl/8Ma9LMGf2gbAeeZc9" class="quick-link" target="_blank" rel="noopener">ğŸ“ Directions</a>
              <a href="http://www.thompsonspointrink.com/" class="quick-link" target="_blank" rel="noopener">ğŸŒ Website</a>
              <a href="https://www.thompsonspointrink.com/iceschedule" class="quick-link" target="_blank" rel="noopener">ğŸŸï¸ Book Session</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="washington-baths-sun" data-name="Washington Baths" data-time="Sunday 7:00am" data-activity="Sauna & cold plunge at Washington Baths">
            <button type="button" class="star-button" data-fav-button="activities-sun" data-fav-id="washington-baths-sun">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Relax & Recharge</span>
            </div>
            <h2 class="choice-title">Washington Baths</h2>
            <p class="choice-meta">$36/person Â· No time limit</p>
            <ul class="choice-list">
              <li>Sauna, cold plunge, hot pool, and relaxation</li>
              <li>Saturday: 12pm-9pm Â· Sunday: 7am-12pm (Winter Solstice!)</li>
              <li>No reservations, all genders welcome</li>
              <li>Bring bathing suit, towel, sandals (towels $3 to rent)</li>
            </ul>
            <div class="quick-links">
              <a href="https://washingtonbaths.com/" class="quick-link" target="_blank" rel="noopener">ğŸŒ Website</a>
              <a href="https://washingtonbaths.com/faq.html" class="quick-link" target="_blank" rel="noopener">ğŸŒ FAQs</a>
            </div>
          </article>
        </div>

        <!-- Brunch Options -->
        <div class="section-header" style="margin-top:18px;">
          <div class="section-title">Brunch at 10:00am</div>
        </div>
        <div class="choice-grid">
          <article class="choice-card" data-choice-id="brunch-union" data-name="UNION" data-time="Sunday 10:00am" data-activity="Brunch at UNION">
            <button type="button" class="star-button" data-fav-button="brunch" data-fav-id="brunch-union">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Classic brunch</span>
            </div>
            <h2 class="choice-title">UNION</h2>
            <p class="choice-meta">10am reservation Â· 3 min walk from hotel</p>
            <ul class="choice-list">
              <li>Good coffee, solid food, no rush</li>
              <li>Walkable from AC Hotel</li>
            </ul>
            <div class="pill-row">
              <span class="pill accent">Walkable</span>
            </div>
            <div class="quick-links">
              <a href="#" class="quick-link" onclick="return false;">ğŸ“ Directions</a>
              <a href="#" class="quick-link" onclick="return false;">ğŸŒ Webpage</a>
              <a href="#" class="quick-link" onclick="return false;">ğŸŸï¸ Reservations</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="brunch-juicery" data-name="The Juicery" data-time="Sunday 10:00am" data-activity="Brunch at The Juicery">
            <button type="button" class="star-button" data-fav-button="brunch" data-fav-id="brunch-juicery">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Light & fresh</span>
            </div>
            <h2 class="choice-title">The Juicery</h2>
            <p class="choice-meta">Old Port Â· Health-focused</p>
            <ul class="choice-list">
              <li>Smoothie bowls, avocado toast, fresh juice</li>
              <li>Light & energizing before exploring</li>
              <li>Quick, healthy, no reservations needed</li>
            </ul>
            <div class="pill-row">
              <span class="pill accent">Light & fresh</span>
            </div>
            <div class="quick-links">
              <a href="#" class="quick-link" onclick="return false;">ğŸ“ Directions</a>
              <a href="#" class="quick-link" onclick="return false;">ğŸŒ Webpage</a>
            </div>
          </article>

          <article class="choice-card" data-choice-id="brunch-hotsuppa" data-name="Hot Suppa" data-time="Sunday 10:00am" data-activity="Brunch at Hot Suppa">
            <button type="button" class="star-button" data-fav-button="brunch" data-fav-id="brunch-hotsuppa">â˜†</button>
            <div class="choice-tag-row">
              <span class="choice-tag">Comfort food</span>
            </div>
            <h2 class="choice-title">Hot Suppa</h2>
            <p class="choice-meta">Arts District Â· Southern comfort</p>
            <ul class="choice-list">
              <li>Biscuits & gravy, fried chicken & waffles</li>
              <li>Hearty, indulgent, stick-to-your-ribs brunch</li>
              <li>Worth the wait if there's a line</li>
            </ul>
            <div class="pill-row">
              <span class="pill accent">Comfort food</span>
            </div>
            <div class="quick-links">
              <a href="#" class="quick-link" onclick="return false;">ğŸ“ Directions</a>
              <a href="#" class="quick-link" onclick="return false;">ğŸŒ Webpage</a>
            </div>
          </article>
        </div>
      </section>

      <section class="section" id="drive-home">
        <div class="section-header">
          <div class="section-title">Drive Home</div>
          <p class="section-subtitle">
            <strong>Last chance activities & road trip tunes</strong> for the 2-hour drive back
          </p>
        </div>

        <div class="section-header" style="margin-top:18px;">
          <div class="section-title">Last Chance!</div>
        </div>
        <div class="choice-grid" style="grid-template-columns: 1fr;">
          <article class="choice-card">
            <div class="choice-tag-row">
              <span class="choice-tag">Cannabis Dispensary</span>
            </div>
            <h2 class="choice-title">Frost Factory: One More for the Road</h2>
            <p class="choice-meta">South Portland Â· 10amâ€“8pm Â· On the way home</p>
            <ul class="choice-list">
              <li>Last chance to grab goodies for the ride home</li>
              <li>Right on the way â€” quick stop, no stress</li>
              <li>Birthday gift for loyalty members (did we mention that already? We're mentioning it again!)</li>
            </ul>
            <div class="quick-links">
              <a href="https://maps.app.goo.gl/D4ik3m1t8gCvXvjn8" class="quick-link" target="_blank" rel="noopener">ğŸ“ Directions</a>
              <a href="https://thefrostfactory.com/" class="quick-link" target="_blank" rel="noopener">ğŸŒ Website</a>
              <a href="https://weedmaps.com/dispensaries/the-frost-factory-2" class="quick-link" target="_blank" rel="noopener">ğŸŸï¸ Preorder</a>
            </div>
          </article>
        </div>

        <div class="section-header" style="margin-top:18px;">
          <div class="section-title">Playlists for the Drive</div>
        </div>
        <div class="choice-grid">
          <article class="choice-card">
            <div class="choice-tag-row">
              <span class="choice-tag">Spotify Playlist</span>
            </div>
            <h2 class="choice-title">Matt</h2>
            <p class="choice-meta">All the songs that remind Meag of her Honeybadger</p>
            <ul class="choice-list">
              <li>Personal playlist curated with love</li>
            </ul>
            <div class="quick-links">
              <a href="https://open.spotify.com/playlist/3b3sqpWJxPz8CbHDPRbB2i?si=16859a21d59b4af1&pt=a7171679a0353062752bdb80b89b73b0" class="quick-link" target="_blank" rel="noopener">ğŸµ Play on Spotify</a>
            </div>
          </article>

          <article class="choice-card">
            <div class="choice-tag-row">
              <span class="choice-tag">Spotify Playlist</span>
            </div>
            <h2 class="choice-title">Babson Columbia '25</h2>
            <p class="choice-meta">All the jams from your epic trip to Columbia</p>
            <ul class="choice-list">
              <li>Throwback to good times and great adventures</li>
            </ul>
            <div class="quick-links">
              <a href="https://open.spotify.com/playlist/5DVDPZQa1L4WnzDoPS6feo?si=fb9191444b114842" class="quick-link" target="_blank" rel="noopener">ğŸµ Play on Spotify</a>
            </div>
          </article>

          <article class="choice-card">
            <div class="choice-tag-row">
              <span class="choice-tag">Spotify Playlist</span>
            </div>
            <h2 class="choice-title">Not Rap</h2>
            <p class="choice-meta">The famous playlist you created for Meag early days</p>
            <ul class="choice-list">
              <li>Proof you listened to music other than rap</li>
              <li>Evidence of why your Spotify age is 61</li>
            </ul>
            <div class="quick-links">
              <a href="https://open.spotify.com/playlist/1DVV7dznCQmD4cEcLZsa2G?si=dc93a837709f4719" class="quick-link" target="_blank" rel="noopener">ğŸµ Play on Spotify</a>
            </div>
          </article>

          <article class="choice-card">
            <div class="choice-tag-row">
              <span class="choice-tag">Spotify Playlist</span>
            </div>
            <h2 class="choice-title">Acid Jazz</h2>
            <p class="choice-meta">Could there be a list without this?</p>
            <ul class="choice-list">
              <li>The classic, the essential, the inevitable</li>
            </ul>
            <div class="quick-links">
              <a href="https://open.spotify.com/playlist/37i9dQZF1DWXHghfFFOaS6?si=e371f8926fc44b26" class="quick-link" target="_blank" rel="noopener">ğŸµ Play on Spotify</a>
            </div>
          </article>
        </div>
      </section>

      <div class="footer-note">
        <div class="save-status" id="save-status">
          Your picks save automatically in this browser. <span>Come back anytime.</span>
        </div>
        <div style="display:flex; gap:10px; align-items:center;">
          <button class="reset-btn" type="button" id="reset-choices">
            <span class="mini-dot"></span>
            Start over
          </button>
          <div class="print-hint">
            <strong>Note:</strong> You are loved!
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    (function () {
      const STORAGE_KEY_PREFIX = "matt-bday-2025-";

      function flashSaveStatus() {
        const el = document.getElementById("save-status");
        if (!el) return;
        el.style.opacity = "1";
        el.style.transition = "opacity 0.4s ease";
        setTimeout(() => {
          el.style.opacity = "0.72";
        }, 900);
      }

      function updateItinerary() {
        const itinerarySummary = document.getElementById("itinerary-summary");
        const itineraryList = document.getElementById("itinerary-list");
        if (!itinerarySummary || !itineraryList) return;

        const items = [];

        // Add all selected items (including auto-selected that are toggled on)
        const categories = ['hotel', 'dinner', 'show', 'activities-sat', 'activities-sun', 'predinner', 'brunch'];
        categories.forEach(category => {
          const favId = localStorage.getItem(STORAGE_KEY_PREFIX + `fav-${category}`);
          if (favId) {
            const card = document.querySelector(`[data-fav-id='${favId}']`)?.closest('.choice-card, .timeline-card');
            if (card) {
              const activity = card.getAttribute('data-activity');
              const time = card.getAttribute('data-time');
              if (activity && time) items.push({ time, activity });
            }
          }
        });

        // Parse and sort by actual time
        items.forEach(item => {
          const match = item.time.match(/(Saturday|Sunday)\s+(\d+):(\d+)\s*([ap]m)/i);
          if (match) {
            item.day = match[1];
            let hour = parseInt(match[2]);
            const minute = parseInt(match[3]);
            const period = match[4].toLowerCase();

            // Convert to 24-hour format for proper sorting
            if (period === 'pm' && hour !== 12) hour += 12;
            if (period === 'am' && hour === 12) hour = 0;

            item.sortTime = hour * 60 + minute;
            item.timeOnly = `${match[2]}:${match[3]} ${match[4]}`;
          }
        });

        items.sort((a, b) => {
          if (a.day !== b.day) {
            return a.day === 'Saturday' ? -1 : 1;
          }
          // Sort by 24-hour time value
          return a.sortTime - b.sortTime;
        });

        // Group by day
        const saturday = items.filter(item => item.day === 'Saturday');
        const sunday = items.filter(item => item.day === 'Sunday');

        // Update the summary with day headers
        if (items.length > 0) {
          let html = '';

          if (saturday.length > 0) {
            html += '<li class="day-header">Saturday</li>';
            saturday.forEach(item => {
              html += `<li><span class="itinerary-time">${item.timeOnly}</span><span class="itinerary-item">${item.activity}</span></li>`;
            });
          }

          if (sunday.length > 0) {
            html += '<li class="day-header">Sunday</li>';
            sunday.forEach(item => {
              html += `<li><span class="itinerary-time">${item.timeOnly}</span><span class="itinerary-item">${item.activity}</span></li>`;
            });
          }

          itineraryList.innerHTML = html;
          itinerarySummary.classList.add('has-items');
        } else {
          itinerarySummary.classList.remove('has-items');
        }
      }

      function applyFavorite(category, favId) {
        // Remove highlight and unselect stars from all cards in this category
        document.querySelectorAll(`[data-fav-button='${category}']`).forEach((btn) => {
          const card = btn.closest('.choice-card, .timeline-card');
          if (card) card.classList.remove("booked");
          btn.textContent = "â˜†";
          btn.classList.remove("selected");
        });

        if (!favId) {
          updateItinerary();
          return;
        }

        // Add highlight to selected card and fill star
        const selectedBtn = document.querySelector(`[data-fav-button='${category}'][data-fav-id='${favId}']`);
        if (selectedBtn) {
          const card = selectedBtn.closest('.choice-card, .timeline-card');
          if (card) card.classList.add("booked");
          selectedBtn.textContent = "â˜…";
          selectedBtn.classList.add("selected");
        }
        updateItinerary();
      }

      function resetAll() {
        const categories = ['hotel', 'dinner', 'show', 'activities-sat', 'activities-sun', 'predinner', 'brunch'];
        categories.forEach(category => {
          localStorage.removeItem(STORAGE_KEY_PREFIX + `fav-${category}`);
          applyFavorite(category, null);
        });
        // Re-initialize auto-selected defaults
        initAutoSelected();
        flashSaveStatus();
      }

      function initAutoSelected() {
        // Set auto-selected items as selected by default if not already set
        const autoCategories = [
          { category: 'hotel', id: 'hotel-checkin' },
          { category: 'dinner', id: 'dinner-central' },
          { category: 'show', id: 'show-ptf' }
        ];
        autoCategories.forEach(({ category, id }) => {
          const saved = localStorage.getItem(STORAGE_KEY_PREFIX + `fav-${category}`);
          if (!saved) {
            localStorage.setItem(STORAGE_KEY_PREFIX + `fav-${category}`, id);
            applyFavorite(category, id);
          }
        });
      }

      function initFavorites() {
        // Initialize auto-selected items first
        initAutoSelected();

        // Load saved favorites
        const categories = ['hotel', 'dinner', 'show', 'activities-sat', 'activities-sun', 'predinner', 'brunch'];
        categories.forEach(category => {
          const saved = localStorage.getItem(STORAGE_KEY_PREFIX + `fav-${category}`);
          if (saved) applyFavorite(category, saved);
        });

        // Set up card click handlers for both choice-card and timeline-card
        document.querySelectorAll(".choice-card, .timeline-card").forEach((card) => {
          // Skip cards without fav-button (like Drive Home cards)
          const btn = card.querySelector("[data-fav-button]");
          if (!btn) return;

          card.addEventListener("click", (e) => {
            // Don't trigger if clicking on a link
            if (e.target.tagName === 'A' || e.target.closest('a')) return;

            const category = btn.getAttribute("data-fav-button");
            const id = btn.getAttribute("data-fav-id");
            if (!category || !id) return;

            const currentFav = localStorage.getItem(STORAGE_KEY_PREFIX + `fav-${category}`);

            try {
              if (currentFav === id) {
                // Unselect if clicking the same item
                localStorage.removeItem(STORAGE_KEY_PREFIX + `fav-${category}`);
                applyFavorite(category, null);
              } else {
                // Select new item
                localStorage.setItem(STORAGE_KEY_PREFIX + `fav-${category}`, id);
                applyFavorite(category, id);
              }
              flashSaveStatus();
            } catch (e) {
              console.warn("Unable to save favorite", e);
            }
          });
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        initFavorites();
        updateItinerary();

        const resetBtn = document.getElementById("reset-choices");
        if (resetBtn) {
          resetBtn.addEventListener("click", () => {
            if (confirm("Start over? This will clear all your picks.")) {
              resetAll();
            }
          });
        }
      });
    })();
  </script>
</body>
</html>
