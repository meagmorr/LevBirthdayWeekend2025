<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Matt’s Birthday Weekend – Portland 2025</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #1a0a28;
      --bg-alt: #2a1640;
      --card: #3d1f52;
      --accent: #4ade80;
      --accent-soft: rgba(74, 222, 128, 0.18);
      --accent-strong: #22c55e;
      --text-main: #f9fafb;
      --text-muted: #d4c5e6;
      --border-subtle: rgba(168, 85, 247, 0.4);
      --danger: #fb7185;
      --shadow-soft: 0 18px 40px rgba(26, 10, 40, 0.9);
      --radius-lg: 18px;
      --radius-pill: 999px;
      --maroon: #6b2240;
      --navy: #1e1b4b;
      --purple: #581c87;
      --green-highlight: #34d399;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top, var(--maroon) 0, var(--navy) 45%, #000 100%);
      color: var(--text-main);
      min-height: 100vh;
      padding: 32px 16px 40px;
      display: flex;
      justify-content: center;
    }

    .page {
      width: 100%;
      max-width: 980px;
      background: radial-gradient(circle at top left, var(--purple) 0, var(--navy) 55%);
      border-radius: 28px;
      border: 1px solid rgba(139, 92, 246, 0.4);
      box-shadow: var(--shadow-soft);
      overflow: hidden;
      position: relative;
    }

    .page::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background:
        radial-gradient(circle at 8% 0%, rgba(52, 211, 153, 0.15) 0, transparent 55%),
        radial-gradient(circle at 100% 10%, rgba(34, 197, 94, 0.12) 0, transparent 50%);
      mix-blend-mode: screen;
    }

    .inner {
      position: relative;
      padding: 28px 22px 30px;
    }

    @media (min-width: 768px) {
      body { padding: 40px 24px; }
      .inner { padding: 32px 32px 34px; }
    }

    header {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 24px;
    }

    .title-block {
      max-width: 520px;
    }

    .eyebrow {
      font-size: 11px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 6px;
    }

    .pill-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--accent-strong);
      box-shadow: 0 0 12px rgba(34, 197, 94, 0.8);
    }

    h1 {
      font-size: clamp(26px, 3vw + 16px, 36px);
      line-height: 1.1;
      font-weight: 650;
      letter-spacing: 0.02em;
      margin-bottom: 6px;
    }

    .subtitle {
      font-size: 14px;
      color: var(--text-muted);
    }

    .meta {
      background: rgba(42, 22, 64, 0.85);
      border-radius: 18px;
      padding: 10px 12px;
      border: 1px solid rgba(139, 92, 246, 0.35);
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 4px 12px;
      max-width: 260px;
      font-size: 12px;
    }

    .meta-label {
      text-transform: uppercase;
      letter-spacing: 0.11em;
      font-size: 10px;
      color: var(--text-muted);
    }

    .meta-value {
      font-weight: 500;
    }

    .sticky-note {
      margin-top: 12px;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px dashed rgba(148, 163, 184, 0.6);
      background: radial-gradient(circle at 0% 0%, rgba(251, 191, 36, 0.07), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(248, 250, 252, 0.04), transparent 55%);
      font-size: 12px;
      color: var(--text-muted);
      max-width: 520px;
    }

    .sticky-note strong {
      color: #a7f3d0;
      font-weight: 600;
    }

    .itinerary-summary {
      margin-top: 20px;
      padding: 16px 18px;
      border-radius: 16px;
      background: linear-gradient(135deg, rgba(52, 211, 153, 0.12), rgba(34, 197, 94, 0.08));
      border: 1px solid rgba(52, 211, 153, 0.5);
      display: none;
    }

    .itinerary-summary.has-items {
      display: block;
    }

    .itinerary-summary-title {
      font-size: 13px;
      font-weight: 600;
      color: #a7f3d0;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .itinerary-list {
      list-style: none;
      display: grid;
      gap: 6px;
      font-size: 13px;
      color: var(--text-main);
    }

    .itinerary-list li {
      display: flex;
      gap: 8px;
      align-items: baseline;
    }

    .itinerary-time {
      color: var(--green-highlight);
      font-weight: 500;
      min-width: 80px;
    }

    .itinerary-item {
      color: #d1fae5;
    }

    .section {
      margin-top: 26px;
      padding-top: 4px;
      border-top: 1px solid rgba(139, 92, 246, 0.3);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 12px;
      gap: 12px;
      flex-wrap: wrap;
    }

    .section-title {
      font-size: 14px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    .section-subtitle {
      font-size: 12px;
      color: var(--text-muted);
    }

    .section-subtitle strong {
      color: var(--accent);
      font-weight: 500;
    }

    .timeline {
      display: grid;
      gap: 10px;
      font-size: 13px;
    }

    .timeline-row {
      display: grid;
      grid-template-columns: 64px minmax(0, 1fr);
      gap: 8px;
      align-items: stretch;
    }

    .time-pill {
      align-self: stretch;
      border-radius: 999px;
      background: rgba(42, 22, 64, 0.9);
      border: 1px solid rgba(139, 92, 246, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 500;
      color: var(--text-muted);
      padding: 4px 0;
    }

    .timeline-card {
      background: linear-gradient(
          135deg,
          rgba(42, 22, 64, 0.96),
          rgba(30, 27, 75, 0.86)
        );
      border-radius: 14px;
      padding: 10px 11px 9px;
      border: 1px solid rgba(139, 92, 246, 0.45);
      display: grid;
      gap: 4px;
      position: relative;
      overflow: hidden;
    }

    .timeline-card::before {
      content: "";
      position: absolute;
      inset: -10%;
      opacity: 0.4;
      background:
        radial-gradient(circle at 0 0, rgba(52, 211, 153, 0.32), transparent 54%),
        radial-gradient(circle at 100% 120%, rgba(34, 197, 94, 0.28), transparent 56%);
      mix-blend-mode: soft-light;
      pointer-events: none;
    }

    .timeline-main {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: space-between;
      gap: 10px;
      align-items: baseline;
    }

    .timeline-title {
      font-size: 13px;
      font-weight: 550;
    }

    .walk-pill {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(139, 92, 246, 0.7);
      color: var(--text-muted);
      background: rgba(42, 22, 64, 0.9);
      white-space: nowrap;
    }

    .timeline-detail {
      position: relative;
      z-index: 1;
      font-size: 12px;
      color: var(--text-muted);
    }

    .choice-grid {
      display: grid;
      gap: 10px;
    }

    @media (min-width: 720px) {
      .choice-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .choice-card {
      position: relative;
      border-radius: 16px;
      padding: 11px 12px 10px;
      background: radial-gradient(circle at 0 0, rgba(52, 211, 153, 0.15), transparent 50%),
        radial-gradient(circle at 100% 120%, rgba(88, 28, 135, 0.5), transparent 60%),
        linear-gradient(145deg, var(--navy), var(--bg));
      border: 1px solid rgba(139, 92, 246, 0.4);
      box-shadow: 0 14px 30px rgba(26, 10, 40, 0.9);
      overflow: hidden;
    }

    .choice-card.booked {
      border-color: rgba(34, 197, 94, 0.9);
      box-shadow: 0 0 0 1px rgba(22, 163, 74, 0.75),
        0 18px 40px rgba(22, 163, 74, 0.7);
    }

    .choice-tag-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 6px;
    }

    .choice-tag {
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--text-muted);
    }

    .booked-badge {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(22, 163, 74, 0.18);
      border: 1px solid rgba(34, 197, 94, 0.9);
      color: #bbf7d0;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .booked-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 4px rgba(22, 163, 74, 0.9);
    }

    .choice-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .choice-meta {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .choice-list {
      list-style: none;
      font-size: 12px;
      color: var(--text-muted);
      display: grid;
      gap: 2px;
      margin-bottom: 8px;
    }

    .choice-list li::before {
      content: "• ";
      color: var(--green-highlight);
      margin-right: 2px;
    }

    .choice-cta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-top: 4px;
    }

    .choice-checkbox-row {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .choice-checkbox {
      width: 14px;
      height: 14px;
      border-radius: 4px;
      border: 1px solid rgba(139, 92, 246, 0.8);
      appearance: none;
      background: rgba(42, 22, 64, 0.95);
      cursor: pointer;
      display: inline-block;
      position: relative;
    }

    .choice-checkbox:checked {
      background: var(--accent-strong);
      border-color: var(--accent-strong);
      box-shadow: 0 0 0 1px rgba(22, 163, 74, 0.3);
    }

    .choice-checkbox:checked::after {
      content: "";
      position: absolute;
      inset: 3px;
      border-radius: 2px;
      border: 2px solid #022c22;
      border-top: none;
      border-right: none;
      transform: rotate(-45deg);
    }

    .choice-note {
      font-size: 11px;
      color: #e5e7eb;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(42, 22, 64, 0.95);
      border: 1px solid rgba(139, 92, 246, 0.5);
    }

    .note-soft {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }

    .pill {
      font-size: 11px;
      padding: 3px 9px;
      border-radius: 999px;
      background: rgba(42, 22, 64, 0.9);
      border: 1px solid rgba(139, 92, 246, 0.4);
      color: var(--text-muted);
    }

    .pill.accent {
      background: rgba(52, 211, 153, 0.16);
      border-color: rgba(52, 211, 153, 0.8);
      color: #d1fae5;
    }

    .footer-note {
      margin-top: 22px;
      font-size: 11px;
      color: var(--text-muted);
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
    }

    .save-status {
      font-size: 11px;
      color: #c4b5d6;
    }

    .save-status span {
      opacity: 0.65;
    }

    .reset-btn {
      border: none;
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      font-size: 11px;
      background: rgba(42, 22, 64, 0.92);
      color: var(--text-muted);
      border: 1px solid rgba(139, 92, 246, 0.6);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .reset-btn:hover {
      background: rgba(42, 22, 64, 1);
      color: #fee2e2;
      border-color: rgba(248, 113, 113, 0.9);
      box-shadow: 0 0 0 1px rgba(248, 113, 113, 0.5);
    }

    .mini-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(248, 113, 113, 0.8);
    }

    .print-hint {
      font-size: 11px;
      color: var(--text-muted);
    }

    .print-hint strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    @media print {
      body {
        background: #fff;
        padding: 0;
      }
      .page {
        box-shadow: none;
        border-radius: 0;
        border: none;
      }
      .inner {
        padding: 16px 18px;
      }
      .save-status,
      .reset-btn {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <main class="page">
    <div class="inner">
      <header>
        <div class="title-block">
          <div class="eyebrow">
            <span class="pill-dot"></span>
            <span>Birthday Weekend · Portland, ME</span>
          </div>
          <h1>Matt's Birthday Weekend</h1>
          <p class="subtitle">
            December 20–21, 2025 · Portland awaits. Pick your vibe, we'll handle the rest.
          </p>
        </div>
        <div>
          <div class="meta">
            <div>
              <div class="meta-label">Hotel</div>
              <div class="meta-value">AC Hotel Portland Downtown/Waterfront</div>
            </div>
            <div>
              <div class="meta-label">Concert</div>
              <div class="meta-value">Pink Talking Fish · State Theatre</div>
            </div>
            <div>
              <div class="meta-label">Dates</div>
              <div class="meta-value">Sat Dec 20 – Sun Dec 21</div>
            </div>
            <div>
              <div class="meta-label">Your Job</div>
              <div class="meta-value">Pick your favorites</div>
            </div>
          </div>
          <div class="sticky-note">
            Check off what sounds good – this page saves your picks automatically. <strong>No login, no fuss.</strong>
          </div>
          <div class="itinerary-summary" id="itinerary-summary">
            <div class="itinerary-summary-title">✨ Your Weekend So Far</div>
            <ul class="itinerary-list" id="itinerary-list">
              <!-- Dynamically populated -->
            </ul>
          </div>
        </div>
      </header>

      <section class="section" id="saturday">
        <div class="section-header">
          <div class="section-title">Saturday · Let's Go</div>
          <p class="section-subtitle">
            Hotel & show are set. <strong>Everything else? Your call.</strong>
          </p>
        </div>

        <div class="timeline">
          <div class="timeline-row">
            <div class="time-pill">PM</div>
            <div class="timeline-card">
              <div class="timeline-main">
                <div class="timeline-title">Check‑in at AC Hotel</div>
                <span class="walk-pill">3:00 PM · Waterfront</span>
              </div>
              <p class="timeline-detail">
                Drop your bags, check out the harbor views, get settled.
              </p>
            </div>
          </div>

          <div class="timeline-row">
            <div class="time-pill">4–6</div>
            <div class="timeline-card">
              <div class="timeline-main">
                <div class="timeline-title">Old Port exploring (optional)</div>
                <span class="walk-pill">AC Hotel → Old Port · easy walk</span>
              </div>
              <p class="timeline-detail">
                Vintage shops, sneakers, random side streets. Or just chill at the hotel bar – totally up to you.
              </p>
            </div>
          </div>

          <div class="timeline-row">
            <div class="time-pill">5–6</div>
            <div class="timeline-card">
              <div class="timeline-main">
                <div class="timeline-title">Dinner · Pick one below</div>
                <span class="walk-pill">Old Port · short walk</span>
              </div>
              <p class="timeline-detail">
                Choose your dinner spot from the options below. We'll book wherever you want.
              </p>
            </div>
          </div>

          <div class="timeline-row">
            <div class="time-pill">7–10</div>
            <div class="timeline-card">
              <div class="timeline-main">
                <div class="timeline-title">Pink Talking Fish · State Theatre ✓</div>
                <span class="walk-pill">Dinner → Theatre · 5 min walk</span>
              </div>
              <p class="timeline-detail">
                Doors 7pm, show 8pm. After the encore, grab a drink or wander around if you're feeling it.
              </p>
            </div>
          </div>
        </div>

        <div class="section-header" style="margin-top:18px;">
          <div class="section-title">Pick Your Dinner Spot</div>
        </div>

        <div class="choice-grid">
          <article class="choice-card" data-choice-id="dinner-central" data-name="Central Provisions" data-time="Saturday 5:30pm" data-activity="Tapas & cocktails at Central Provisions">
            <div class="choice-tag-row">
              <span class="choice-tag">Small plates & energy</span>
            </div>
            <h2 class="choice-title">Central Provisions</h2>
            <p class="choice-meta">
              Old Port · 5 min walk from hotel
            </p>
            <ul class="choice-list">
              <li>Tapas-style shareables, good cocktails</li>
              <li>Buzzy vibe but still cozy</li>
              <li>Perfect pre-show spot</li>
            </ul>
            <div class="choice-cta">
              <button
                type="button"
                class="choice-note"
                data-fav-button="dinner"
                data-fav-id="central"
              >
                MY FAV
              </button>
            </div>
          </article>

          <article class="choice-card" data-choice-id="dinner-leeward" data-name="Leeward" data-time="Saturday 5:30pm" data-activity="Fresh pasta at Leeward">
            <div class="choice-tag-row">
              <span class="choice-tag">Fresh pasta & vibes</span>
            </div>
            <h2 class="choice-title">Leeward</h2>
            <p class="choice-meta">
              Arts District · 7 min walk from hotel
            </p>
            <ul class="choice-list">
              <li>Handmade pasta, seasonal plates</li>
              <li>Quieter vibe, more intimate</li>
              <li>Close to the theatre for after</li>
            </ul>
            <div class="choice-cta">
              <button
                type="button"
                class="choice-note"
                data-fav-button="dinner"
                data-fav-id="leeward"
              >
                MY FAV
              </button>
            </div>
          </article>

          <article class="choice-card" data-choice-id="dinner-eventide" data-name="Eventide Oyster Co." data-time="Saturday 5:30pm" data-activity="Lobster rolls & oysters at Eventide">
            <div class="choice-tag-row">
              <span class="choice-tag">Seafood & oysters</span>
            </div>
            <h2 class="choice-title">Eventide Oyster Co.</h2>
            <p class="choice-meta">
              Old Port · 6 min walk from hotel
            </p>
            <ul class="choice-list">
              <li>Brown-butter lobster rolls, fresh oysters</li>
              <li>Lighter feel before the show</li>
              <li>Classic Maine coastal vibes</li>
            </ul>
            <div class="choice-cta">
              <button
                type="button"
                class="choice-note"
                data-fav-button="dinner"
                data-fav-id="eventide"
              >
                MY FAV
              </button>
            </div>
          </article>
        </div>
      </section>

      <section class="section" id="sunday">
        <div class="section-header">
          <div class="section-title">Sunday · Easy Morning</div>
          <p class="section-subtitle">
            Brunch is set. <strong>What's next is up to you.</strong> Heart whatever sounds good. Or do none of it and just drive home – also totally fine.
          </p>
        </div>

        <div class="timeline">
          <div class="timeline-row">
            <div class="time-pill">10:00</div>
            <div class="timeline-card">
              <div class="timeline-main">
                <div class="timeline-title">Brunch at UNION ✓</div>
                <span class="walk-pill">AC Hotel → UNION · 3 min walk</span>
              </div>
              <p class="timeline-detail">
                10am reservation. Good coffee, solid food, no rush.
              </p>
            </div>
          </div>
        </div>

        <div class="section-header" style="margin-top:18px;">
          <div class="section-title">After Brunch</div>
        </div>

        <div class="choice-grid">
          <article class="choice-card" data-choice-id="sun-lighthouse" data-name="Portland Head Light" data-time="Sunday 11:30am" data-activity="Lighthouse & coastal cliff walk">
            <div class="choice-tag-row">
              <span class="choice-tag">Ocean & cliffs</span>
            </div>
            <h2 class="choice-title">Portland Head Light & Fort Williams</h2>
            <p class="choice-meta">
              15 min drive · Classic Maine coastline
            </p>
            <ul class="choice-list">
              <li>Walk cliff paths, watch waves crash</li>
              <li>Lighthouse views & photo ops</li>
              <li>Nice "we got away" vibe before heading back</li>
            </ul>
            <div class="choice-cta">
              <button
                type="button"
                class="choice-note"
                data-fav-button="sunday"
                data-fav-id="sun-lighthouse"
              >
                MY FAV
              </button>
            </div>
            <div class="pill-row">
              <span class="pill">Short drive</span>
              <span class="pill accent">Fresh air</span>
            </div>
          </article>

          <article class="choice-card" data-choice-id="sun-vintage" data-name="Shopping Loop" data-time="Sunday 11:30am" data-activity="Vintage shopping & sneakers">
            <div class="choice-tag-row">
              <span class="choice-tag">Shops & sneakers</span>
            </div>
            <h2 class="choice-title">Vintage & Menswear Loop</h2>
            <p class="choice-meta">
              Old Port & Arts District
            </p>
            <ul class="choice-list">
              <li>Hit the vintage/menswear/sneaker shops you missed Saturday</li>
              <li>Grab something cool if you find it</li>
              <li>Coffee stop before driving back</li>
            </ul>
            <div class="choice-cta">
              <button
                type="button"
                class="choice-note"
                data-fav-button="sunday"
                data-fav-id="sun-vintage"
              >
                MY FAV
              </button>
            </div>
            <div class="pill-row">
              <span class="pill accent">Vintage & style</span>
              <span class="pill">Easy walk</span>
            </div>
          </article>

          <article class="choice-card" data-choice-id="sun-chill" data-name="Chill Mode" data-time="Sunday 11:30am" data-activity="Harbor walk & coffee">
            <div class="choice-tag-row">
              <span class="choice-tag">Keep it easy</span>
            </div>
            <h2 class="choice-title">Hotel, Harbor Walk & Coffee</h2>
            <p class="choice-meta">
              Waterfront · No rush
            </p>
            <ul class="choice-list">
              <li>Linger over brunch, walk the waterfront</li>
              <li>Grab coffee, then head back</li>
              <li>Soft landing after a big Saturday</li>
            </ul>
            <div class="choice-cta">
              <button
                type="button"
                class="choice-note"
                data-fav-button="sunday"
                data-fav-id="sun-chill"
              >
                MY FAV
              </button>
            </div>
            <div class="pill-row">
              <span class="pill accent">Low key</span>
              <span class="pill">Zero stress</span>
            </div>
          </article>
        </div>
      </section>

      <div class="footer-note">
        <div class="save-status" id="save-status">
          Your picks save automatically in this browser. <span>Come back anytime.</span>
        </div>
        <div style="display:flex; gap:10px; align-items:center;">
          <button class="reset-btn" type="button" id="reset-choices">
            <span class="mini-dot"></span>
            Start over
          </button>
          <div class="print-hint">
            <strong>Pro tip:</strong> Print this page to take a hard copy with you
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    (function () {
      const STORAGE_KEY_PREFIX = "matt-bday-2025-";

      function flashSaveStatus() {
        const el = document.getElementById("save-status");
        if (!el) return;
        el.style.opacity = "1";
        el.style.transition = "opacity 0.4s ease";
        setTimeout(() => {
          el.style.opacity = "0.72";
        }, 900);
      }

      function updateItinerary() {
        const itinerarySummary = document.getElementById("itinerary-summary");
        const itineraryList = document.getElementById("itinerary-list");
        if (!itinerarySummary || !itineraryList) return;

        const items = [];

        // Check for favorite dinner
        const favDinner = localStorage.getItem(STORAGE_KEY_PREFIX + "fav-dinner");
        if (favDinner) {
          const dinnerCard = document.querySelector(`[data-fav-id='${favDinner}']`)?.closest('.choice-card');
          if (dinnerCard) {
            const activity = dinnerCard.getAttribute('data-activity');
            const time = dinnerCard.getAttribute('data-time');
            if (activity && time) items.push({ time, activity });
          }
        }

        // Check for favorite Sunday activity
        const favSunday = localStorage.getItem(STORAGE_KEY_PREFIX + "fav-sunday");
        if (favSunday) {
          const sundayCard = document.querySelector(`[data-fav-id='${favSunday}']`)?.closest('.choice-card');
          if (sundayCard) {
            const activity = sundayCard.getAttribute('data-activity');
            const time = sundayCard.getAttribute('data-time');
            if (activity && time) items.push({ time, activity });
          }
        }

        // Update the summary
        if (items.length > 0) {
          itineraryList.innerHTML = items.map(item =>
            `<li><span class="itinerary-time">${item.time}</span><span class="itinerary-item">${item.activity}</span></li>`
          ).join('');
          itinerarySummary.classList.add('has-items');
        } else {
          itinerarySummary.classList.remove('has-items');
        }
      }

      function applyFavDinner(favId) {
        // Remove highlight from all dinner cards
        document.querySelectorAll("[data-choice-id^='dinner-']").forEach((card) => {
          card.classList.remove("booked");
        });

        if (!favId) {
          updateItinerary();
          return;
        }

        // Add highlight to selected dinner card
        const selectorMap = {
          central: "[data-choice-id='dinner-central']",
          leeward: "[data-choice-id='dinner-leeward']",
          eventide: "[data-choice-id='dinner-eventide']"
        };

        const card = document.querySelector(selectorMap[favId]);
        if (card) {
          card.classList.add("booked");
        }
        updateItinerary();
      }

      function applyFavSunday(favId) {
        // Remove highlight from all Sunday cards
        document.querySelectorAll("[data-choice-id^='sun-']").forEach((card) => {
          card.classList.remove("booked");
        });

        if (!favId) {
          updateItinerary();
          return;
        }

        // Add highlight to selected Sunday card
        const card = document.querySelector(`[data-choice-id='${favId}']`);
        if (card) {
          card.classList.add("booked");
        }
        updateItinerary();
      }

      function resetAll() {
        localStorage.removeItem(STORAGE_KEY_PREFIX + "fav-dinner");
        localStorage.removeItem(STORAGE_KEY_PREFIX + "fav-sunday");

        document.querySelectorAll(".choice-card").forEach((card) => card.classList.remove("booked"));

        updateItinerary();
        flashSaveStatus();
      }

      function initFavorites() {
        // Load saved favorites
        const savedDinner = localStorage.getItem(STORAGE_KEY_PREFIX + "fav-dinner");
        const savedSunday = localStorage.getItem(STORAGE_KEY_PREFIX + "fav-sunday");

        if (savedDinner) applyFavDinner(savedDinner);
        if (savedSunday) applyFavSunday(savedSunday);

        // Set up dinner button handlers
        document.querySelectorAll("[data-fav-button='dinner']").forEach((btn) => {
          btn.addEventListener("click", () => {
            const id = btn.getAttribute("data-fav-id");
            if (!id) return;
            try {
              localStorage.setItem(STORAGE_KEY_PREFIX + "fav-dinner", id);
              applyFavDinner(id);
              flashSaveStatus();
            } catch (e) {
              console.warn("Unable to save favorite dinner", e);
            }
          });
        });

        // Set up Sunday button handlers
        document.querySelectorAll("[data-fav-button='sunday']").forEach((btn) => {
          btn.addEventListener("click", () => {
            const id = btn.getAttribute("data-fav-id");
            if (!id) return;
            try {
              localStorage.setItem(STORAGE_KEY_PREFIX + "fav-sunday", id);
              applyFavSunday(id);
              flashSaveStatus();
            } catch (e) {
              console.warn("Unable to save favorite Sunday activity", e);
            }
          });
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        initFavorites();
        updateItinerary();

        const resetBtn = document.getElementById("reset-choices");
        if (resetBtn) {
          resetBtn.addEventListener("click", () => {
            if (confirm("Start over? This will clear all your picks.")) {
              resetAll();
            }
          });
        }
      });
    })();
  </script>
</body>
</html>
